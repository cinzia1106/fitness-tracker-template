import{c as Fe,r as o,j as e,C as Ce,X as se,U as me,L as Pe,a as V,S as Be,P as Y,b as J,d as De,G as te,e as Le,M as Te,D as Re,A as Ae,f as Oe,W as Me,B as We,g as Ee,h as _e,i as fe,k as Ge,l as xe,T as Ie,m as ee,n as ye,o as ze,I as Ue,p as qe,q as je,s as Ye,R as we,t as Ne,u as $e,v as He,w as Ke,F as Ve,x as Je,y as re,z as Xe,E as le,H as ne,Y as ie,J as oe,K as Qe,N as Ze,O as X,Q as et,V as tt,Z as st,_ as at,$ as rt,a0 as lt,a1 as nt}from"./vendor-D2tAAI4q.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const b of n.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&l(b)}).observe(document,{childList:!0,subtree:!0});function a(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(i){if(i.ep)return;i.ep=!0;const n=a(i);fetch(i.href,n)}})();const ve={è›‹ç™½è³ª:{emoji:"ğŸ¥©",label:"Protein"},ç¢³æ°´:{emoji:"ğŸš",label:"Carbs"},è”¬èœ:{emoji:"ğŸ¥¦",label:"Veggies"},æ°´æœ:{emoji:"ğŸ",label:"Fruits"},è„‚è‚ª:{emoji:"ğŸ¥‘",label:"Fats"},ä¹³è£½å“:{emoji:"ğŸ¥›",label:"Dairy"},é£²å“:{emoji:"â˜•",label:"Drinks"},æ°´:{emoji:"ğŸ’§",label:"Water"},å…¶ä»–:{emoji:"ğŸ½ï¸",label:"Others"}},it="";class ot{isGAS=typeof window<"u"&&window.google&&window.google.script;call(t,...a){return new Promise(async(l,i)=>{if(!this.isGAS){if(t==="getAnalytics"){const n=[],b=new Date;for(let c=14;c>=0;c--){const g=new Date(b);g.setDate(b.getDate()-c),n.push({date:g.toISOString().split("T")[0],weight:75+Math.random(),calories:2e3+Math.random()*500,protein:150+Math.random()*30,carbs:200+Math.random()*50,fat:60+Math.random()*20,sleep:6+Math.random()*3,mood:Math.floor(Math.random()*5)+1,workoutCount:Math.random()>.5?1:0})}l(n);return}if(t==="getBodyData"){l({weight:75.5,waist:80,hip:95,gripL:45,gripR:48,bedTime:"23:30",wakeTime:"07:30",mood:4,menstrual:!1});return}if(t==="getLatestBodyMetrics"){l({weight:75,waist:80,hip:95,gripL:45,gripR:48});return}if(t==="logBodyData"){l({success:!0});return}if(t==="getWorkouts"){l([]);return}if(t==="getWorkoutHistory"){l({});return}if(t==="getRoutines"){l({});return}if(t==="logWorkout"||t==="deleteWorkout"){l({success:!0});return}if(t==="getComboList"){l([]);return}if(t==="logCombo"||t==="deleteNutrition"||t==="updateNutrition"){l({success:!0});return}if(t==="getWeeklyAerobic"){l({totalMinutes:0});return}if(t==="logBodyData"){l({success:!0});return}try{const b=await(await fetch(it,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:t==="processRequest"?a[0].action:t,data:a[0]?.data||null})})).json();l(b)}catch(n){console.error("API Error:",n),i(n)}return}window.google.script.run.withSuccessHandler(n=>{try{l(JSON.parse(n))}catch{l(n)}}).withFailureHandler(n=>i(n))[t](...a)})}async getFoodList(){return this.call("processRequest",{action:"getFoodList"})}async getNutritionLogs(t){return this.call("processRequest",{action:"getNutrition",data:{date:t}})}async logNutrition(t){return this.call("processRequest",{action:"logNutrition",data:t})}async deleteNutritionLog(t){return this.call("processRequest",{action:"deleteNutrition",data:{rowIndex:t}})}async updateNutritionLog(t,a,l){return this.call("processRequest",{action:"updateNutrition",data:{rowIndex:t,mealName:a,newAmount:l}})}async getComboList(){return this.call("processRequest",{action:"getComboList"})}async logCombo(t,a){return this.call("processRequest",{action:"logCombo",data:{date:t,comboName:a}})}async getWorkouts(t){return this.call("processRequest",{action:"getWorkouts",data:{date:t}})}async logWorkout(t){return this.call("processRequest",{action:"logWorkout",data:t})}async deleteWorkout(t){return this.call("processRequest",{action:"deleteWorkout",data:{rowIndex:t}})}async getRoutines(){return this.call("processRequest",{action:"getRoutines"})}async getWorkoutHistory(t){return this.call("processRequest",{action:"getWorkoutHistory",data:{currentDate:t}})}async getWeeklyAerobicTotal(t){return this.call("processRequest",{action:"getWeeklyAerobic",data:{date:t}})}async getBodyData(t){return this.call("processRequest",{action:"getBodyData",data:{date:t}})}async logBodyData(t){return this.call("processRequest",{action:"logBodyData",data:t})}async getLatestBodyMetrics(){return this.call("processRequest",{action:"getLatestBodyMetrics"})}async getAnalyticsData(){return this.call("processRequest",{action:"getAnalytics"})}}const D=new ot,ct=()=>{const s=new Date,t=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0");return`${t}-${a}-${l}`},dt=()=>{if(typeof window<"u"){const s=localStorage.getItem("cycleWeek");if(s)return Number(s)}return 1},H=Fe((s,t)=>({currentView:"NUTRITION",currentDate:ct(),caloriesTarget:2500,proteinTarget:180,carbsTarget:250,fatTarget:70,waterTarget:3e3,caloriesConsumed:0,proteinConsumed:0,carbsConsumed:0,fatConsumed:0,dailyLogs:[],workoutLogs:[],routines:{},cycleWeek:dt(),selectedRoutine:null,workoutHistory:{},aerobicWeeklyGoal:150,aerobicWeeklyCurrent:0,bodyData:null,latestMetrics:{weight:0,waist:0,hip:0,gripL:0,gripR:0},analyticsData:[],workoutDone:!1,isLoading:!1,setView:a=>s({currentView:a}),setCycleWeek:a=>{localStorage.setItem("cycleWeek",String(a)),s({cycleWeek:a})},setSelectedRoutine:a=>s({selectedRoutine:a}),setDate:a=>{s({currentDate:a}),t().fetchDailyData()},fetchDailyData:async()=>{const{currentDate:a}=t();s({isLoading:!0});try{const[l,i,n,b,c,g]=await Promise.all([D.getNutritionLogs(a),D.getWorkouts(a),D.getWorkoutHistory(a),D.getWeeklyAerobicTotal(a),D.getBodyData(a),D.getLatestBodyMetrics()]);let y=0,f=0,h=0,p=0;Array.isArray(l)&&l.forEach(j=>{y+=j.calories||0,f+=j.protein||0,h+=j.carbs||0,p+=j.fat||0}),s({caloriesConsumed:y,proteinConsumed:f,carbsConsumed:h,fatConsumed:p,dailyLogs:Array.isArray(l)?l:[],workoutLogs:Array.isArray(i)?i:[],workoutHistory:n||{},aerobicWeeklyCurrent:b?.totalMinutes||0,bodyData:c,latestMetrics:g||{weight:0,waist:0,hip:0,gripL:0,gripR:0},isLoading:!1})}catch(l){console.error(l),s({isLoading:!1,dailyLogs:[],workoutLogs:[],bodyData:null})}},fetchAnalytics:async()=>{s({isLoading:!0});try{const a=await D.getAnalyticsData();s({analyticsData:a,isLoading:!1})}catch(a){console.error(a),s({isLoading:!1})}},fetchRoutines:async()=>{try{const a=await D.getRoutines();s({routines:a})}catch(a){console.error(a)}},deleteLog:async a=>{s({isLoading:!0});try{await D.deleteNutritionLog(a),await t().fetchDailyData()}catch{alert("Delete failed"),s({isLoading:!1})}},deleteWorkoutLog:async a=>{s({isLoading:!0});try{await D.deleteWorkout(a),await t().fetchDailyData()}catch{alert("Delete failed"),s({isLoading:!1})}},toggleWorkout:()=>s(a=>({workoutDone:!a.workoutDone}))})),ke={è›‹ç™½è³ª:{icon:We,color:"text-rose-500",bg:"bg-rose-50"},ç¢³æ°´:{icon:Me,color:"text-blue-500",bg:"bg-blue-50"},è”¬èœ:{icon:Oe,color:"text-emerald-500",bg:"bg-emerald-50"},æ°´æœ:{icon:Ae,color:"text-purple-500",bg:"bg-purple-50"},è„‚è‚ª:{icon:Re,color:"text-yellow-500",bg:"bg-yellow-50"},ä¹³è£½å“:{icon:Te,color:"text-cyan-500",bg:"bg-cyan-50"},é£²å“:{icon:Le,color:"text-slate-500",bg:"bg-slate-50"},æ°´:{icon:te,color:"text-sky-500",bg:"bg-sky-50"},å…¶ä»–:{icon:De,color:"text-gray-400",bg:"bg-gray-50"}},xt=({isOpen:s,onClose:t})=>{const{fetchDailyData:a,currentDate:l}=H(),[i,n]=o.useState([]),[b,c]=o.useState([]),[g,y]=o.useState(!1),[f,h]=o.useState("FOOD"),[p,j]=o.useState("CATEGORY_LIST"),[u,v]=o.useState(null),[x,w]=o.useState(null),[T,R]=o.useState(""),[S,C]=o.useState(1),[A,N]=o.useState(!1);o.useEffect(()=>{s&&(y(!0),Promise.all([D.getFoodList(),D.getComboList()]).then(([r,m])=>{Array.isArray(r)&&n(r),Array.isArray(m)&&c(m)}).catch(()=>{}).finally(()=>y(!1)),O())},[s]);const O=()=>{h("FOOD"),j("CATEGORY_LIST"),v(null),w(null),R(""),C(1)},$=o.useMemo(()=>{let r=i;return r=r.filter(m=>m.category!=="æ°´"),u&&(r=r.filter(m=>m.category===u)),T&&(r=r.filter(m=>m.name.toLowerCase().includes(T.toLowerCase()))),r},[i,u,T]),U=r=>{v(r),j("FOOD_LIST"),R("")},W=r=>{w(r),j("AMOUNT_INPUT"),r.unit.toLowerCase()==="g"?C(100):C(1)},B=()=>{p==="AMOUNT_INPUT"?(j("FOOD_LIST"),w(null)):p==="FOOD_LIST"&&(j("CATEGORY_LIST"),v(null),R(""))},L=r=>x?x.unit.toLowerCase()==="g"?r/100:r:0,M=async()=>{if(!x)return;const r=Number(S)||0;if(r<=0)return;N(!0);const m=L(r);try{await D.logNutrition({date:l,mealName:x.name,calories:Math.round(x.calories*m),protein:Math.round(x.protein*m),carbs:Math.round(x.carbs*m),fat:Math.round(x.fat*m),amount:r,unit:x.unit,category:x.category}),await a(),t()}catch{alert("Failed to save.")}finally{N(!1)}},F=async r=>{if(confirm(`Add combo "${r}"?`)){N(!0);try{await D.logCombo(l,r),await a(),t()}catch{alert("Failed to add combo.")}finally{N(!1)}}},E=r=>{const m=r.target.value;(m===""||/^\d*\.?\d*$/.test(m))&&C(m)},P=r=>{const m=Number(S)||0;let k=r;x?.unit.toLowerCase()==="g"&&(k=r*10),C(Math.max(0,m+k))};if(!s)return null;let I="Add Meal";f==="COMBO"?I="My Combos":p==="FOOD_LIST"&&u?I=ve[u]?.label||"Food List":p==="AMOUNT_INPUT"&&(I="Edit Amount");const q=r=>ke[r]||ke.å…¶ä»–;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:t}),e.jsxs("div",{className:"relative bg-gray-50 w-full max-w-md rounded-t-[2.5rem] h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-5 bg-gray-50 z-10 min-h-[70px]",children:[p!=="CATEGORY_LIST"&&f==="FOOD"?e.jsx("button",{onClick:B,className:"p-3 text-gray-500 hover:text-black bg-white rounded-full shadow-sm border border-gray-100",children:e.jsx(Ce,{className:"w-5 h-5"})}):e.jsx("button",{onClick:t,className:"p-3 text-gray-400 hover:text-gray-600 bg-white rounded-full shadow-sm border border-gray-100",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-bold text-lg text-gray-900 tracking-tight",children:I}),e.jsx("div",{className:"w-11"})]}),(p==="CATEGORY_LIST"||f==="COMBO")&&e.jsx("div",{className:"px-6 pb-2",children:e.jsxs("div",{className:"bg-gray-200/60 p-1.5 rounded-2xl flex",children:[e.jsxs("button",{onClick:()=>{h("FOOD"),j("CATEGORY_LIST")},className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${f==="FOOD"?"bg-white shadow-sm text-black":"text-gray-500"}`,children:[e.jsx(me,{className:"w-4 h-4"}),"Foods"]}),e.jsxs("button",{onClick:()=>h("COMBO"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${f==="COMBO"?"bg-white shadow-sm text-black":"text-gray-500"}`,children:[e.jsx(Pe,{className:"w-4 h-4"}),"Combos"]})]})}),e.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[g||A?e.jsxs("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-gray-50/80 backdrop-blur-sm text-gray-400",children:[e.jsx(V,{className:"w-8 h-8 animate-spin mb-2 text-blue-500"}),e.jsx("p",{className:"font-medium tracking-wide",children:A?"Adding...":"Syncing..."})]}):null,f==="COMBO"&&e.jsx("div",{className:"p-6 overflow-y-auto h-full animate-fade-in space-y-4 pb-24",children:b.length===0?e.jsx("div",{className:"text-center text-gray-400 mt-10",children:"No combos found"}):b.map((r,m)=>e.jsxs("div",{onClick:()=>F(r.name),className:"bg-white p-5 rounded-3xl shadow-sm border border-gray-100 active:scale-[0.98] transition-all cursor-pointer hover:shadow-md group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900",children:r.name}),e.jsxs("div",{className:"bg-orange-50 text-orange-600 px-3 py-1 rounded-full text-sm font-bold",children:[r.totalCalories," kcal"]})]}),e.jsx("div",{className:"space-y-1",children:r.items.map((k,_)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 border-b border-gray-50 pb-1 last:border-0",children:[e.jsx("span",{children:k.name}),e.jsxs("span",{className:"text-gray-300 font-mono",children:[k.amount,k.unit]})]},_))})]},m))}),f==="FOOD"&&p==="CATEGORY_LIST"&&e.jsx("div",{className:"p-6 overflow-y-auto h-full animate-fade-in",children:e.jsx("div",{className:"grid grid-cols-2 gap-4 pb-20",children:Object.entries(ve).filter(([r])=>r!=="æ°´").map(([r,{label:m}])=>{const k=q(r),_=k.icon;return e.jsxs("button",{onClick:()=>U(r),className:`
                        ${k.bg} p-6 rounded-[1.8rem] shadow-sm border-0 
                        flex flex-col items-center justify-center gap-4 
                        active:scale-95 transition-all hover:brightness-95 h-36
                      `,children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-white flex items-center justify-center shadow-sm ${k.color}`,children:e.jsx(_,{className:"w-6 h-6",strokeWidth:2.5})}),e.jsx("span",{className:`font-bold text-base ${k.color.replace("text-","text-opacity-80 ")}`,children:m})]},r)})})}),f==="FOOD"&&p==="FOOD_LIST"&&e.jsxs("div",{className:"flex flex-col h-full animate-fade-in bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-10px_rgba(0,0,0,0.05)] mt-2",children:[e.jsx("div",{className:"p-6 pb-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search food...",className:"w-full pl-12 pr-4 py-3.5 rounded-2xl border-none bg-gray-100 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all text-lg font-medium placeholder-gray-400",value:T,onChange:r=>R(r.target.value)})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 pb-20",children:$.map((r,m)=>e.jsxs("div",{onClick:()=>W(r),className:"p-4 mb-2 bg-white rounded-2xl border border-gray-50 flex justify-between items-center active:bg-gray-50 transition-colors cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-orange-500 bg-orange-50 px-2 py-0.5 rounded-md",children:[r.calories," kcal"]}),e.jsx("span",{className:"text-gray-300",children:"/"}),e.jsx("span",{className:"text-gray-400 text-xs",children:r.unit==="g"?"100g":r.unit})]})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 text-gray-400 flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5"})})]},m))})]}),f==="FOOD"&&p==="AMOUNT_INPUT"&&x&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 flex flex-col items-center animate-fade-in bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-10px_rgba(0,0,0,0.05)] mt-2",children:[(()=>{const r=q(x.category),m=r.icon;return e.jsx("div",{className:`w-24 h-24 ${r.bg} rounded-full flex items-center justify-center mb-5 shadow-inner`,children:e.jsx(m,{className:`w-10 h-10 ${r.color}`,strokeWidth:2})})})(),e.jsx("h3",{className:"text-3xl font-black mb-1 text-center text-gray-900 tracking-tight",children:x.name}),e.jsxs("p",{className:"text-gray-400 font-medium mb-8",children:[x.calories," kcal / ",x.unit==="g"?"100g":x.unit]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-10 p-2 bg-gray-50 rounded-[2rem] w-full max-w-xs border border-gray-100",children:[e.jsx("button",{onClick:()=>P(-1),className:"w-14 h-14 rounded-full bg-white border border-gray-200 flex items-center justify-center text-gray-400 hover:text-black active:scale-90 shadow-sm transition-all",children:e.jsx("span",{className:"text-2xl font-light",children:"-"})}),e.jsxs("div",{className:"flex flex-col items-center w-24",children:[e.jsx("input",{type:"text",inputMode:"decimal",value:S,onChange:E,className:"w-full text-center text-5xl font-black text-gray-900 bg-transparent border-none focus:ring-0 p-0 outline-none placeholder-gray-200"}),e.jsx("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mt-1",children:x.unit})]}),e.jsx("button",{onClick:()=>P(1),className:"w-14 h-14 rounded-full bg-black text-white flex items-center justify-center active:scale-90 shadow-lg transition-all",children:e.jsx(Y,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"w-full grid grid-cols-3 gap-3 mb-auto",children:[e.jsx(ce,{label:"CARBS",value:x.carbs*L(Number(S)||0),color:"bg-blue-50 text-blue-600 border-blue-100"}),e.jsx(ce,{label:"PROTEIN",value:x.protein*L(Number(S)||0),color:"bg-rose-50 text-rose-600 border-rose-100"}),e.jsx(ce,{label:"FAT",value:x.fat*L(Number(S)||0),color:"bg-yellow-50 text-yellow-600 border-yellow-100"})]}),e.jsxs("button",{onClick:M,disabled:A||(Number(S)||0)<=0,className:"w-full py-4 bg-black text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 active:scale-95 transition-transform shadow-xl mt-8 mb-4 disabled:opacity-50 disabled:scale-100",children:[e.jsx(J,{className:"w-6 h-6"}),e.jsxs("span",{children:["Add ",Math.round(x.calories*L(Number(S)||0))," kcal"]})]})]})]})]})]})},ce=({label:s,value:t,color:a})=>e.jsxs("div",{className:`p-3 rounded-2xl text-center border ${a} shadow-sm flex flex-col justify-center aspect-[4/3]`,children:[e.jsx("div",{className:"text-[10px] font-black opacity-60 mb-1 tracking-wider",children:s}),e.jsxs("div",{className:"font-black text-xl leading-none",children:[Math.round(t),e.jsx("span",{className:"text-xs ml-0.5 font-bold opacity-80",children:"g"})]})]}),mt=({current:s,target:t})=>{const a=[{name:"Consumed",value:s},{name:"Remaining",value:Math.max(0,t-s)}],l=t-s;return e.jsxs("div",{className:"relative flex flex-col items-center justify-center -mt-4",children:[e.jsxs(Ee,{width:300,height:160,children:[e.jsxs(_e,{data:a,cx:150,cy:140,startAngle:180,endAngle:0,innerRadius:85,outerRadius:100,paddingAngle:0,dataKey:"value",stroke:"none",children:[e.jsx(fe,{fill:"url(#colorGradient)"},"consumed"),e.jsx(fe,{fill:"#f3f4f6"},"remaining")]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#f97316"})," ",e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})," "]})})]}),e.jsxs("div",{className:"absolute bottom-0 text-center pb-2",children:[e.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Remaining"}),e.jsx("h2",{className:"text-4xl font-black text-gray-900 tracking-tight",children:l}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"kcal"})]})]})},he=({date:s,onChange:t})=>{const a=new Date(s),l=[];for(let c=-3;c<=3;c++){const g=new Date(a);g.setDate(g.getDate()+c),l.push(g)}const i=c=>{const g=new Date;return c.toDateString()===g.toDateString()},n=c=>{const g=c.getTimezoneOffset()*6e4;return new Date(c.getTime()-g).toISOString().split("T")[0]},b=c=>{const g=new Date(a);g.setDate(g.getDate()+c),t(n(g))};return e.jsxs("div",{className:"flex flex-col gap-2 mb-8 w-full",children:[e.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),!i(a)&&e.jsx("button",{onClick:()=>t(n(new Date)),className:"text-xs font-bold text-orange-500 bg-orange-50 px-4 py-2 rounded-full hover:bg-orange-100 transition",children:"Back to Today"})]}),e.jsxs("div",{className:"bg-white p-2 rounded-[2rem] shadow-sm border border-gray-100 flex items-center justify-between relative z-10 w-full",children:[e.jsx("button",{onClick:()=>b(-7),className:"p-3 text-gray-300 hover:text-gray-600 rounded-full hover:bg-gray-50 transition",children:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 flex justify-around items-center px-2 gap-2",children:l.map((c,g)=>{const y=n(c),f=y===s,h=i(c),p=g===0||g===6?"hidden lg:flex":"flex";return e.jsxs("button",{onClick:()=>t(y),className:`
                  ${p} flex-col items-center justify-center 
                  w-12 h-16 sm:w-16 sm:h-20 rounded-2xl transition-all duration-300 relative
                  ${f?"bg-black text-white shadow-xl scale-110 z-10":"text-gray-400 hover:bg-gray-50 hover:text-gray-600"}
                `,children:[e.jsx("span",{className:`text-[10px] sm:text-xs font-bold uppercase mb-1 ${f?"text-gray-400":""}`,children:c.toLocaleDateString("en-US",{weekday:"short"}).charAt(0)}),e.jsx("span",{className:`text-xl sm:text-2xl font-black leading-none ${f?"text-white":"text-gray-800"}`,children:c.getDate()}),h&&!f&&e.jsx("span",{className:"absolute bottom-2 w-1.5 h-1.5 bg-orange-500 rounded-full"})]},y)})}),e.jsx("button",{onClick:()=>b(7),className:"p-3 text-gray-300 hover:text-gray-600 rounded-full hover:bg-gray-50 transition",children:e.jsx(Ge,{className:"w-6 h-6"})})]})]})},Se={è›‹ç™½è³ª:{icon:We,color:"text-rose-500",bg:"bg-rose-50"},ç¢³æ°´:{icon:Me,color:"text-blue-500",bg:"bg-blue-50"},è”¬èœ:{icon:Oe,color:"text-emerald-500",bg:"bg-emerald-50"},æ°´æœ:{icon:Ae,color:"text-purple-500",bg:"bg-purple-50"},è„‚è‚ª:{icon:Re,color:"text-yellow-500",bg:"bg-yellow-50"},ä¹³è£½å“:{icon:Te,color:"text-cyan-500",bg:"bg-cyan-50"},é£²å“:{icon:Le,color:"text-slate-500",bg:"bg-slate-50"},æ°´:{icon:te,color:"text-sky-500",bg:"bg-sky-50"},å…¶ä»–:{icon:De,color:"text-gray-400",bg:"bg-gray-50"}},ht=()=>{const{currentDate:s,setDate:t,caloriesTarget:a,caloriesConsumed:l,proteinTarget:i,proteinConsumed:n,carbsTarget:b,carbsConsumed:c,fatTarget:g,fatConsumed:y,waterTarget:f,dailyLogs:h,deleteLog:p,isLoading:j,fetchDailyData:u}=H(),[v,x]=o.useState(!1),[w,T]=o.useState(!1);o.useEffect(()=>{u()},[u]);const R=h.filter(N=>N.mealName==="Water").reduce((N,O)=>N+O.amount,0),S=Math.min(R/f*100,100),C=h.filter(N=>N.mealName!=="Water"),A=async()=>{T(!0);try{await D.logNutrition({date:s,mealName:"Water",calories:0,protein:0,carbs:0,fat:0,amount:100,unit:"ml",category:"æ°´"}),await u()}catch{alert("Failed to add water")}finally{T(!1)}};return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32",children:[e.jsx(he,{date:s,onChange:t}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 flex flex-col items-center relative overflow-hidden",children:[j&&e.jsx("div",{className:"absolute inset-0 bg-white/80 z-10 flex items-center justify-center",children:e.jsx(V,{className:"w-8 h-8 animate-spin text-orange-500"})}),e.jsx(mt,{current:l,target:a}),e.jsxs("div",{className:"w-full flex justify-between px-6 mt-[-20px] mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:"Eaten"}),e.jsx("p",{className:"text-xl font-black text-gray-900",children:l})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:"Goal"}),e.jsx("p",{className:"text-xl font-black text-gray-900",children:a})]})]}),e.jsxs("div",{className:"w-full grid grid-cols-3 gap-2 sm:gap-4 border-t border-gray-100 pt-6",children:[e.jsx(de,{label:"Protein",current:n,target:i,color:"bg-rose-500",bg:"bg-rose-100"}),e.jsx(de,{label:"Carbs",current:c,target:b,color:"bg-blue-500",bg:"bg-blue-100"}),e.jsx(de,{label:"Fat",current:y,target:g,color:"bg-yellow-500",bg:"bg-yellow-100"})]})]}),e.jsxs("div",{className:"bg-sky-50 rounded-[2rem] p-6 shadow-sm border border-sky-100 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 bg-white rounded-lg shadow-sm",children:e.jsx(te,{className:"w-4 h-4 text-sky-500"})}),e.jsx("span",{className:"text-sm font-bold text-sky-900 uppercase tracking-wide",children:"Water Tracker"})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-4xl font-black text-sky-600",children:R}),e.jsxs("span",{className:"text-sm font-bold text-sky-400",children:["/ ",f," ml"]})]})]}),e.jsxs("button",{onClick:A,disabled:w,className:"bg-white text-sky-500 p-3 rounded-2xl shadow-sm active:scale-95 transition-all hover:shadow-md disabled:opacity-70 flex flex-col items-center justify-center gap-1 w-20 h-20",children:[w?e.jsx(V,{className:"w-6 h-6 animate-spin"}):e.jsx(Y,{className:"w-6 h-6 stroke-[3px]"}),e.jsx("span",{className:"text-xs font-bold",children:"+100ml"})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-sky-400 mb-1.5",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(S),"%"]})]}),e.jsx("div",{className:"w-full h-3 bg-white rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-sky-300 to-sky-500 rounded-full transition-all duration-700 ease-out",style:{width:`${S}%`}})})]}),e.jsx(te,{className:"absolute -right-6 -bottom-6 w-40 h-40 text-sky-200/40 -rotate-12 pointer-events-none"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"hidden lg:flex w-full bg-black text-white p-5 rounded-[2rem] shadow-xl items-center justify-center gap-3 active:scale-95 transition-transform hover:bg-gray-800",children:[e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-lg",children:"Log Food"})]})]}),e.jsxs("div",{className:"lg:col-span-7",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4 px-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Today's Meals"}),e.jsxs("span",{className:"text-sm text-gray-500 font-medium bg-white px-3 py-1 rounded-full shadow-sm border border-gray-100",children:[C.length," entries"]})]}),e.jsx("div",{className:"space-y-3",children:C.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-[2rem] border border-dashed border-gray-200",children:"No food logged yet today."}):C.map(N=>e.jsx(gt,{log:N,onDelete:()=>p(N.rowIndex),onUpdate:()=>u()},N.rowIndex))})]})]}),e.jsx("div",{className:"lg:hidden fixed bottom-24 left-0 right-0 flex justify-center z-50 pointer-events-none",children:e.jsxs("button",{onClick:()=>x(!0),className:"pointer-events-auto bg-black text-white px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 active:scale-95 transition-transform hover:bg-gray-900",children:[e.jsx(Y,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-lg",children:"Log Food"})]})}),e.jsx(xt,{isOpen:v,onClose:()=>x(!1)})]})},gt=({log:s,onDelete:t,onUpdate:a})=>{const[l,i]=o.useState(!1),[n,b]=o.useState(s.amount||0),[c,g]=o.useState(!1),y=o.useRef(null);o.useEffect(()=>{l&&y.current&&y.current.focus()},[l]);const f=()=>{confirm(`Delete "${s.mealName}"?`)&&t()},h=async()=>{if(Number(n)===0){f();return}if(!(n<0)){g(!0);try{await D.updateNutritionLog(s.rowIndex,s.mealName,Number(n)),i(!1),a()}catch{alert("Update failed")}finally{g(!1)}}},p=Se[s.category]||Se.å…¶ä»–,j=p.icon;return e.jsxs("div",{className:"bg-white p-4 sm:p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center group hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${p.bg} flex items-center justify-center shadow-inner flex-shrink-0`,children:e.jsx(j,{className:`w-5 h-5 ${p.color}`,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg leading-tight",children:s.mealName}),e.jsxs("span",{className:"text-xs text-gray-300 font-mono flex items-center gap-1 mt-0.5",children:[e.jsx(xe,{className:"w-3 h-3"}),s.time]})]})]}),e.jsxs("div",{className:"pl-[3.25rem] flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-gray-500 font-medium",children:[e.jsx("div",{className:"flex items-center gap-2 bg-gray-50 px-2 py-0.5 rounded-lg border border-gray-100",children:l?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{ref:y,type:"number",className:"w-16 bg-white border border-blue-200 rounded px-1 py-0 text-right font-bold text-black focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:u=>b(Number(u.target.value)),onKeyDown:u=>u.key==="Enter"&&h()}),e.jsx("span",{className:"text-xs",children:s.unit}),e.jsx("button",{onClick:h,disabled:c,className:"text-green-600 hover:bg-green-100 p-1 rounded",children:c?e.jsx(V,{className:"w-4 h-4 animate-spin"}):e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>i(!1),className:"text-red-400 hover:bg-red-50 p-1 rounded",children:e.jsx(se,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-1 hover:text-blue-600 hover:bg-blue-50 px-1 rounded transition-colors group/edit",children:[e.jsx("span",{className:"font-bold text-gray-900 group-hover/edit:text-blue-600",children:s.amount>0?s.amount:"-"}),e.jsx("span",{className:"text-xs",children:s.unit})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-200 hidden sm:inline",children:"|"}),e.jsxs("span",{className:"text-orange-500 font-bold",children:[s.calories," kcal"]}),e.jsx("span",{className:"text-gray-200 hidden sm:inline",children:"|"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-rose-500",children:[s.protein,"p"]}),e.jsxs("span",{className:"text-blue-500",children:[s.carbs,"c"]}),e.jsxs("span",{className:"text-yellow-600",children:[s.fat,"f"]})]})]})]})]}),!l&&e.jsx("button",{onClick:f,className:"p-3 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]})},de=({label:s,current:t,target:a,color:l,bg:i})=>{const n=Math.min(t/a*100,100);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 mb-1",children:s}),e.jsxs("div",{className:"text-lg font-black text-gray-900 mb-2",children:[Math.round(t),e.jsxs("span",{className:"text-[10px] text-gray-400 font-normal",children:["/",a,"g"]})]}),e.jsx("div",{className:`w-full h-2 ${i} rounded-full overflow-hidden`,children:e.jsx("div",{className:`h-full ${l} rounded-full transition-all duration-500`,style:{width:`${n}%`}})})]})},ut=()=>{const{currentDate:s,setDate:t,workoutLogs:a,deleteWorkoutLog:l,fetchDailyData:i,routines:n,fetchRoutines:b,cycleWeek:c,setCycleWeek:g,selectedRoutine:y,setSelectedRoutine:f,workoutHistory:h,aerobicWeeklyGoal:p,aerobicWeeklyCurrent:j}=H(),[u,v]=o.useState("Strength"),[x,w]=o.useState(""),[T,R]=o.useState(""),[S,C]=o.useState(""),[A,N]=o.useState(""),[O,$]=o.useState(""),[U,W]=o.useState(""),[B,L]=o.useState(""),[M,F]=o.useState(""),[E,P]=o.useState(!1);o.useEffect(()=>{b()},[b]),o.useEffect(()=>{u==="Aerobic"?(w("Run"),W("30"),L("3.5"),F("130")):(w(""),W(""),L(""),F(""))},[u]);const I=d=>c===3?d.w3:d.w12,q=d=>{const G=I(d);v("Strength"),w(d.exercise),N(String(G.sets));const K=G.reps.split(/[-~]/)[0]||"";C(K),document.getElementById("workout-form")?.scrollIntoView({behavior:"smooth"})},r=async()=>{if(x){P(!0);try{await D.logWorkout({date:s,type:u,exercise:x,weight:Number(T)||0,reps:Number(S)||0,sets:Number(A)||0,rpe:Number(O)||0,time:Number(U)||0,intensity:B,heartRate:Number(M)||0,tags:[]}),await i(),u==="Strength"?(w(""),R(""),C(""),N(""),$("")):(w("Run"),W("30"),L("3.5"),F("130"))}catch{alert("Failed to log workout")}finally{P(!1)}}},m=d=>{confirm("Delete this workout record?")&&l(d)},k=c===3?"Week 3 (Intensity)":`Week ${c} (Volume)`,_=c===3?"bg-red-500":"bg-black",ge=Math.max(0,p-j),ue=Math.min(j/p*100,100);return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32",children:[e.jsx(he,{date:s,onChange:t}),u==="Strength"&&e.jsx("div",{className:"flex justify-center mb-6 -mt-2",children:e.jsxs("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold text-white shadow-sm flex items-center gap-2 ${c===3?"bg-red-500":"bg-black"}`,children:[e.jsx("span",{className:"opacity-70 uppercase tracking-wider",children:"Current Cycle"}),e.jsxs("span",{children:["Week ",c]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[e.jsxs("div",{className:"flex bg-gray-200/50 p-1 rounded-2xl",children:[e.jsxs("button",{onClick:()=>v("Strength"),className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${u==="Strength"?"bg-white shadow-sm text-black":"text-gray-400"}`,children:[e.jsx(ee,{className:"w-5 h-5"})," Strength"]}),e.jsxs("button",{onClick:()=>v("Aerobic"),className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${u==="Aerobic"?"bg-white shadow-sm text-black":"text-gray-400"}`,children:[e.jsx(ye,{className:"w-5 h-5"})," Aerobic"]})]}),u==="Strength"&&e.jsxs("div",{className:`${_} text-white rounded-[2rem] p-6 shadow-xl relative overflow-hidden transition-colors duration-500`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs font-bold uppercase tracking-wider mb-1",children:"Select Cycle"}),e.jsx("h2",{className:"text-2xl font-black italic",children:k})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-1 flex",children:[1,2,3].map(d=>e.jsx("button",{onClick:()=>g(d),className:`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${c===d?"bg-white text-black shadow-sm":"text-white/60 hover:text-white"}`,children:d},d))})]}),e.jsxs("div",{className:"relative z-10 mt-4",children:[e.jsx("label",{className:"text-white/60 text-xs font-bold uppercase mb-2 block",children:"Select Routine"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:[Object.keys(n).length===0&&e.jsx("div",{className:"text-white/40 text-xs",children:"Please setup DB_Routines"}),Object.keys(n).map(d=>e.jsx("button",{onClick:()=>f(y===d?null:d),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold border transition-all ${y===d?"bg-white text-black border-white":"border-white/30 text-white hover:bg-white/10"}`,children:d},d))]})]}),e.jsx(ee,{className:"absolute -right-6 -bottom-6 w-40 h-40 text-white/10 -rotate-12 pointer-events-none"})]}),u==="Aerobic"&&e.jsxs("div",{className:"bg-cyan-500 text-white rounded-[2rem] p-6 shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-cyan-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Weekly Target"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h2",{className:"text-4xl font-black",children:ge>0?ge:0}),e.jsx("span",{className:"text-cyan-200 font-bold",children:"mins left"})]})]}),e.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:e.jsx(ze,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-200 mb-1.5",children:[e.jsxs("span",{children:[j," min done"]}),e.jsxs("span",{children:[Math.round(ue),"%"]})]}),e.jsx("div",{className:"w-full h-3 bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-700 ease-out",style:{width:`${ue}%`}})})]}),e.jsx(ye,{className:"absolute -right-6 -bottom-6 w-40 h-40 text-white/10 -rotate-12 pointer-events-none"})]}),u==="Strength"&&y&&n[y]&&e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 animate-fade-in",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-green-500"}),"Plan: ",y]}),e.jsx("div",{className:"space-y-3",children:n[y].map((d,G)=>{const K=a.some(ae=>ae.exercise===d.exercise),be=I(d),pe=h[d.exercise];return e.jsxs("button",{onClick:()=>q(d),className:`w-full text-left p-4 rounded-2xl border transition-all group relative ${K?"bg-gray-50 border-gray-100 opacity-60":"bg-white border-gray-100 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`font-bold text-lg ${K?"text-gray-400 line-through":"text-gray-900"}`,children:d.exercise}),d.note&&e.jsx("div",{className:"group/tooltip relative ml-2",onClick:ae=>{ae.stopPropagation(),alert(d.note)},children:e.jsx(Ue,{className:"w-5 h-5 text-blue-400/70 hover:text-blue-500 transition-colors"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"text-xs font-bold bg-gray-100 text-gray-600 px-2 py-1 rounded-md",children:[be.sets," Sets"]}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-md ${c===3?"bg-red-50 text-red-600":"bg-blue-50 text-blue-600"}`,children:[be.reps," Reps"]}),pe&&e.jsxs("span",{className:"text-[10px] text-gray-400 font-medium ml-auto",children:["Last: ",pe.weight,"kg"]})]})]}),!K&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(qe,{className:"w-5 h-5 text-blue-500"})})]},G)})})]}),e.jsx("div",{id:"workout-form",className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase ml-1 mb-1 block",children:"Exercise Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:u==="Strength"?"e.g. Bench Press":"e.g. Running",className:"w-full bg-gray-50 rounded-2xl pl-4 pr-10 py-3 font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-black/5",value:x,onChange:d=>w(d.target.value)}),x&&e.jsx("button",{onClick:()=>w(""),className:"absolute right-3 top-3.5 text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"w-4 h-4"})})]}),u==="Strength"&&x&&h[x]&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1 ml-1",children:["Last: ",e.jsxs("strong",{children:[h[x].weight,"kg"]})," Ã— ",h[x].reps," reps"]})]}),u==="Strength"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(z,{label:"Sets",value:A,onChange:N,type:"number",placeholder:"3"}),e.jsx(z,{label:"Reps",value:S,onChange:C,type:"number",placeholder:"10"}),e.jsx(z,{label:"Weight (kg)",value:T,onChange:R,type:"number",placeholder:"60"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.jsx(z,{label:"RPE (1-10)",value:O,onChange:$,type:"number",placeholder:"8"})})]}):e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(z,{label:"Time (min)",value:U,onChange:W,type:"number",placeholder:"30"}),e.jsx(z,{label:"Intensity (1-10)",value:B,onChange:L,type:"number",placeholder:"3.5",step:"0.1",min:"1",max:"10"}),e.jsx(z,{label:"Avg HR",value:M,onChange:F,type:"number",placeholder:"130"})]}),e.jsx("button",{onClick:r,disabled:E||!x,className:"w-full bg-black text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform disabled:opacity-50 mt-2",children:E?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5"})," Log Workout"]})})]})})]}),e.jsxs("div",{className:"lg:col-span-7",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 px-1",children:"Today's Session"}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-400 bg-white rounded-[2rem] border border-dashed border-gray-200",children:[e.jsx(ee,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No workouts logged today."})]}):a.map(d=>{const G=h[d.exercise];return e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center group hover:shadow-md transition-all",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${d.type==="Strength"?"bg-blue-50 text-blue-600":"bg-cyan-50 text-cyan-600"}`,children:d.type})}),e.jsx("h4",{className:"font-bold text-lg text-gray-900",children:d.exercise}),e.jsx("div",{className:"text-sm text-gray-500 font-medium mt-1 flex items-center gap-2",children:d.type==="Strength"?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[d.sets," sets Ã— ",d.reps," reps ",e.jsx("span",{className:"text-gray-300",children:"|"})," ",e.jsxs("b",{children:[d.weight,"kg"]})," ",e.jsx("span",{className:"text-gray-300",children:"|"})," RPE ",d.rpe]}),G&&e.jsxs("span",{className:"text-xs text-gray-400 ml-1 border-l border-gray-200 pl-2",children:["(Last: ",G.weight,"kg)"]})]}):e.jsxs("span",{children:[d.time," mins ",e.jsx("span",{className:"text-gray-300",children:"|"})," Int: ",d.intensity," ",e.jsx("span",{className:"text-gray-300",children:"|"})," ",d.heartRate," bpm"]})})]}),e.jsx("button",{onClick:()=>m(d.rowIndex),className:"p-3 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]},d.rowIndex)})})]})]})]})},z=({label:s,value:t,onChange:a,type:l,placeholder:i,step:n,min:b,max:c})=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase ml-1 mb-1 block",children:s}),e.jsx("input",{type:l,placeholder:i,step:n,min:b,max:c,className:"w-full bg-gray-50 rounded-2xl px-4 py-3 font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-black/5 placeholder-gray-300",value:t,onChange:g=>a(g.target.value)})]}),bt=()=>{const{currentDate:s,setDate:t,bodyData:a,latestMetrics:l,fetchDailyData:i}=H(),[n,b]=o.useState(""),[c,g]=o.useState(""),[y,f]=o.useState(""),[h,p]=o.useState(""),[j,u]=o.useState(""),[v,x]=o.useState(""),[w,T]=o.useState(""),[R,S]=o.useState(0),[C,A]=o.useState(!1),[N,O]=o.useState(!1),[$,U]=o.useState(null),[W,B]=o.useState(!1),L=new Date(s).getDay()===6;o.useEffect(()=>{a?(b(a.weight?String(a.weight):""),g(a.waist?String(a.waist):""),f(a.hip?String(a.hip):""),p(a.gripL?String(a.gripL):""),u(a.gripR?String(a.gripR):""),x(a.bedTime||""),T(a.wakeTime||""),S(typeof a.mood=="number"?a.mood:0),A(a.menstrual||!1)):(b(l.weight?String(l.weight):""),g(l.waist?String(l.waist):""),f(l.hip?String(l.hip):""),p(l.gripL?String(l.gripL):""),u(l.gripR?String(l.gripR):""),x(""),T(""),S(0),A(!1))},[a,s,l]);const M=async(r={})=>{B(!0);try{await D.logBodyData({date:s,weight:Number(n)||0,waist:Number(c)||0,hip:Number(y)||0,gripL:Number(h)||0,gripR:Number(j)||0,bedTime:v,wakeTime:w,mood:R||0,menstrual:C,...r}),await i()}catch{alert("Failed to save")}finally{B(!1)}},F=()=>{const r=new Date,m=String(r.getHours()).padStart(2,"0"),k=String(r.getMinutes()).padStart(2,"0");return`${m}:${k}`},E=r=>{const m=F();r==="bed"?(x(m),M({bedTime:m})):(T(m),M({wakeTime:m}))},P=r=>{U(r),O(!0)},I=r=>{$==="bed"?(x(r),M({bedTime:r})):(T(r),M({wakeTime:r})),O(!1)},q=["ğŸ˜­","ğŸ˜Ÿ","ğŸ˜","ğŸ™‚","ğŸ˜€"];return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32",children:[e.jsx(he,{date:s,onChange:t}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 animate-fade-in",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"p-2 bg-purple-50 rounded-xl text-purple-500",children:e.jsx(je,{className:"w-5 h-5"})}),"Body Metrics"]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-2 block",children:"Daily Check"}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-xl shadow-sm text-purple-500",children:e.jsx(je,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold text-gray-700 text-lg",children:"Weight"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("input",{type:"number",step:"0.1",placeholder:"-",className:"w-24 bg-transparent text-right text-3xl font-black text-purple-600 placeholder-purple-300 focus:outline-none",value:n,onChange:r=>b(r.target.value)}),e.jsx("span",{className:"text-sm font-bold text-purple-400",children:"kg"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Weekly Check (Sat)"}),!L&&e.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-400 px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(Ye,{className:"w-3 h-3"})," Not Saturday"]})]}),e.jsxs("div",{className:`grid grid-cols-2 gap-3 transition-opacity ${L?"":"opacity-50 grayscale pointer-events-none"}`,children:[e.jsx(Q,{label:"Waist",unit:"cm",value:c,onChange:g,icon:we,color:"text-blue-500",disabled:!L}),e.jsx(Q,{label:"Hip",unit:"cm",value:y,onChange:f,icon:we,color:"text-cyan-500",disabled:!L}),e.jsx(Q,{label:"Grip (L)",unit:"kg",value:h,onChange:p,icon:Ne,color:"text-orange-500",disabled:!L}),e.jsx(Q,{label:"Grip (R)",unit:"kg",value:j,onChange:u,icon:Ne,color:"text-orange-500",disabled:!L})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-2 block",children:"Sleep Tracker"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>P("bed"),className:`
                            relative overflow-hidden p-6 rounded-[1.5rem] flex flex-col items-center justify-center gap-2 transition-all active:scale-95 border group
                            ${v?"bg-indigo-500 text-white border-indigo-500 shadow-lg shadow-indigo-200":"bg-gray-50 text-gray-400 border-gray-100 hover:bg-gray-100"}
                        `,children:[e.jsx($e,{className:`w-8 h-8 ${v?"text-white":"text-indigo-400"}`,strokeWidth:2}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${v?"text-indigo-100":"text-gray-400"}`,children:"Bedtime"}),v?e.jsx("div",{className:"text-3xl font-black tracking-tight mt-1",children:v}):e.jsx("span",{className:"text-sm font-medium",children:"Tap to Record"}),e.jsx("div",{onClick:r=>{r.stopPropagation(),E("bed")},className:"absolute bottom-3 right-3 bg-white/20 backdrop-blur-sm p-2 rounded-xl shadow-sm z-20 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity hover:bg-white/40",children:e.jsx(xe,{className:`w-5 h-5 ${v?"text-white":"text-indigo-400"}`})})]}),e.jsxs("button",{onClick:()=>P("wake"),className:`
                            relative overflow-hidden p-6 rounded-[1.5rem] flex flex-col items-center justify-center gap-2 transition-all active:scale-95 border group
                            ${w?"bg-orange-500 text-white border-orange-500 shadow-lg shadow-orange-200":"bg-gray-50 text-gray-400 border-gray-100 hover:bg-gray-100"}
                        `,children:[e.jsx(He,{className:`w-8 h-8 ${w?"text-white":"text-orange-400"}`,strokeWidth:2}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${w?"text-orange-100":"text-gray-400"}`,children:"Wake Up"}),w?e.jsx("div",{className:"text-3xl font-black tracking-tight mt-1",children:w}):e.jsx("span",{className:"text-sm font-medium",children:"Tap to Record"}),e.jsx("div",{onClick:r=>{r.stopPropagation(),E("wake")},className:"absolute bottom-3 right-3 bg-white/20 backdrop-blur-sm p-2 rounded-xl shadow-sm z-20 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity hover:bg-white/40",children:e.jsx(xe,{className:`w-5 h-5 ${w?"text-white":"text-orange-400"}`})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50/50 p-4 rounded-2xl border border-yellow-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-yellow-600 font-bold",children:[e.jsx(Ke,{className:"w-5 h-5"})," Mood"]}),e.jsx("div",{className:"flex justify-between text-2xl",children:q.map((r,m)=>{const k=m+1,_=R===k;return e.jsx("button",{onClick:()=>S(k),className:`transition-transform duration-200 ${_?"scale-125 drop-shadow-md grayscale-0":"grayscale opacity-40 hover:opacity-100 hover:grayscale-0"}`,children:r},k)})})]}),e.jsxs("div",{className:"bg-pink-50/50 p-4 rounded-2xl border border-pink-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink-600 font-bold",children:[e.jsx(Ve,{className:"w-5 h-5"})," Period"]}),e.jsx("button",{onClick:()=>A(!C),className:`px-4 py-2 rounded-xl font-bold text-sm transition-colors ${C?"bg-pink-500 text-white shadow-md":"bg-white text-gray-400 border border-gray-200"}`,children:C?"Yes":"No"})]})]}),e.jsx("button",{onClick:()=>M(),disabled:W,className:"w-full bg-black text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform disabled:opacity-50 mt-4",children:W?e.jsx(V,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5"})," Save Daily Log"]})})]}),e.jsx(pt,{isOpen:N,onClose:()=>O(!1),onConfirm:I,initialValue:$==="bed"?v:w,title:$==="bed"?"Bedtime":"Wake Up Time"})]})]})},Q=({label:s,unit:t,value:a,onChange:l,icon:i,color:n,disabled:b})=>e.jsxs("div",{className:`bg-gray-50 p-3 rounded-2xl flex flex-col justify-center gap-1 ${b?"opacity-50 pointer-events-none":""}`,children:[e.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase flex items-center gap-1",children:[e.jsx(i,{className:`w-3 h-3 ${n}`})," ",s]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("input",{type:"number",step:"0.1",placeholder:"-",className:"w-full bg-transparent text-xl font-black text-gray-900 placeholder-gray-300 focus:outline-none",value:a,onChange:c=>l(c.target.value)}),e.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:t})]})]}),pt=({isOpen:s,onClose:t,onConfirm:a,initialValue:l,title:i})=>{const[n,b]=o.useState("00"),[c,g]=o.useState("00");if(o.useEffect(()=>{if(s){let h=l;if(!h){const u=new Date,v=String(u.getHours()).padStart(2,"0"),x=String(u.getMinutes()).padStart(2,"0");h=`${v}:${x}`}const[p,j]=h.split(":");b(p||"00"),g(j||"00")}},[s,l]),!s)return null;const y=Array.from({length:24},(h,p)=>p.toString().padStart(2,"0")),f=Array.from({length:60},(h,p)=>p.toString().padStart(2,"0"));return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:t}),e.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-t-3xl shadow-2xl animate-slide-up overflow-hidden pb-safe h-[400px] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 bg-white z-10",children:[e.jsx("button",{onClick:t,className:"p-2 text-gray-400",children:e.jsx(se,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold text-lg",children:i}),e.jsx("button",{onClick:()=>a(`${n}:${c}`),className:"p-2 text-blue-600 font-bold",children:e.jsx(J,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-0 right-0 h-14 bg-gray-100/50 -z-10 mx-4 rounded-xl pointer-events-none"}),e.jsxs("div",{className:"flex-1 overflow-y-auto snap-y snap-mandatory no-scrollbar py-32 text-center",children:[y.map(h=>e.jsx("div",{onClick:()=>b(h),className:`snap-center h-14 flex items-center justify-center text-3xl font-bold cursor-pointer transition-all ${n===h?"text-black scale-110":"text-gray-300 scale-90"}`,children:h},h)),e.jsx("div",{className:"h-32"})]}),e.jsx("div",{className:"flex items-center justify-center font-black text-3xl pb-2 text-gray-300",children:":"}),e.jsxs("div",{className:"flex-1 overflow-y-auto snap-y snap-mandatory no-scrollbar py-32 text-center",children:[f.map(h=>e.jsx("div",{onClick:()=>g(h),className:`snap-center h-14 flex items-center justify-center text-3xl font-bold cursor-pointer transition-all ${c===h?"text-black scale-110":"text-gray-300 scale-90"}`,children:h},h)),e.jsx("div",{className:"h-32"})]})]})]})]})},ft=()=>{const{fetchAnalytics:s,analyticsData:t,isLoading:a}=H();o.useEffect(()=>{s()},[s]);const l=i=>{const n=new Date(i);return`${n.getMonth()+1}/${n.getDate()}`};return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6 px-1",children:"Data Analytics"}),a?e.jsx("div",{className:"flex justify-center py-20 text-gray-400",children:"Loading charts..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-50 text-purple-500 rounded-xl",children:e.jsx(Je,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold text-gray-700",children:"Weight Trend"})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(re,{width:"100%",height:"100%",children:e.jsxs(Xe,{data:t,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorWeight",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),e.jsx(le,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(ne,{dataKey:"date",tickFormatter:l,tick:{fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(ie,{domain:["dataMin - 1","dataMax + 1"],hide:!0}),e.jsx(oe,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},labelFormatter:i=>new Date(i).toDateString()}),e.jsx(Qe,{type:"monotone",dataKey:"weight",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorWeight)",strokeWidth:3,connectNulls:!0})]})})})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-orange-50 text-orange-500 rounded-xl",children:e.jsx(me,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold text-gray-700",children:"Calories & Macros"})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(re,{width:"100%",height:"100%",children:e.jsxs(Ze,{data:t,stackOffset:"sign",children:[e.jsx(le,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(ne,{dataKey:"date",tickFormatter:l,tick:{fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(oe,{cursor:{fill:"#f9fafb"},contentStyle:{borderRadius:"12px",border:"none"}}),e.jsx(X,{dataKey:"protein",stackId:"a",fill:"#f43f5e",name:"Protein"})," ",e.jsx(X,{dataKey:"carbs",stackId:"a",fill:"#3b82f6",name:"Carbs"}),"   ",e.jsx(X,{dataKey:"fat",stackId:"a",fill:"#eab308",name:"Fat"}),"       "]})})})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-500 rounded-xl",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold text-gray-700",children:"Sleep & Mood"})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(re,{width:"100%",height:"100%",children:e.jsxs(et,{data:t,children:[e.jsx(le,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(ne,{dataKey:"date",tickFormatter:l,tick:{fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(ie,{yAxisId:"left",domain:[0,12],hide:!0}),e.jsx(ie,{yAxisId:"right",domain:[0,6],orientation:"right",hide:!0}),e.jsx(oe,{contentStyle:{borderRadius:"12px",border:"none"}}),e.jsx(tt,{}),e.jsx(X,{yAxisId:"left",dataKey:"sleep",barSize:10,fill:"#6366f1",radius:[4,4,0,0],name:"Sleep (hr)"}),e.jsx(st,{yAxisId:"right",type:"monotone",dataKey:"mood",stroke:"#eab308",strokeWidth:3,dot:{r:4},name:"Mood (1-5)"})]})})})]})]})]})};function yt(){const{currentView:s,setView:t}=H();return e.jsxs("div",{className:"min-h-screen w-full bg-gray-50 text-gray-900 font-sans pb-24",children:[s==="NUTRITION"&&e.jsx(ht,{}),s==="WORKOUT"&&e.jsx(ut,{}),s==="BODY"&&e.jsx(bt,{}),s==="ANALYTICS"&&e.jsx(ft,{}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 pb-safe pt-2 px-4 shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.05)] z-50",children:e.jsxs("div",{className:"flex justify-between items-center max-w-md mx-auto h-16",children:[e.jsx(Z,{view:"NUTRITION",icon:me,label:"Nutrition",current:s,setView:t}),e.jsx(Z,{view:"WORKOUT",icon:ee,label:"Workout",current:s,setView:t}),e.jsx(Z,{view:"BODY",icon:at,label:"Body",current:s,setView:t}),e.jsx(Z,{view:"ANALYTICS",icon:rt,label:"Data",current:s,setView:t})]})})]})}const Z=({view:s,icon:t,label:a,current:l,setView:i})=>e.jsxs("button",{onClick:()=>i(s),className:`flex flex-col items-center gap-1 w-16 transition-colors ${l===s?"text-black":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx("div",{className:`p-1.5 rounded-xl transition-all ${l===s?"bg-gray-100 scale-110":"bg-transparent"}`,children:e.jsx(t,{className:"w-5 h-5",strokeWidth:l===s?2.5:2})}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wide",children:a})]});lt.createRoot(document.getElementById("root")).render(e.jsx(nt.StrictMode,{children:e.jsx(yt,{})}));
