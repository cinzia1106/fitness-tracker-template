import{c as Fe,r as o,j as e,C as Ce,X as re,U as ge,L as Pe,a as J,S as Ee,P as H,b as X,d as De,G as ae,e as Le,M as Te,D as Re,A as Ae,f as Oe,W as We,B as Me,g as Be,h as _e,i as fe,k as Ge,l as me,T as Ie,m as se,n as ye,o as ze,I as Ue,p as qe,q as je,s as Ye,R as we,t as Ne,u as $e,v as He,w as Ke,F as Ve,x as Je,y as ne,z as Xe,E as ie,H as oe,Y as ce,J as de,K as Qe,N as Ze,O as Z,Q as et,V as tt,Z as st,_ as at,$ as rt,a0 as lt,a1 as nt}from"./vendor-D2tAAI4q.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();const ve={},it="https://script.google.com/macros/s/AKfycbx......./exec";class ot{isGAS=typeof window<"u"&&window.google&&window.google.script;call(t,...s){return new Promise(async(r,i)=>{if(!this.isGAS){if(t==="getBodyData"){r({weight:75.5,waist:80,hip:95,gripL:45,gripR:48,bedTime:"23:30",wakeTime:"07:30",mood:4,menstrual:!1,poop:!1});return}if(t==="getLatestBodyMetrics"){r({weight:75,waist:80,hip:95,gripL:45,gripR:48});return}if(t==="logBodyData"){r({success:!0});return}if(t==="getWorkouts"){r([]);return}if(t==="getWorkoutHistory"){r({});return}if(t==="getRoutines"){r({});return}if(t==="logWorkout"||t==="deleteWorkout"){r({success:!0});return}if(t==="getComboList"){r([]);return}if(t==="logCombo"||t==="deleteNutrition"||t==="updateNutrition"){r({success:!0});return}if(t==="getWeeklyAerobic"){r({totalMinutes:0});return}if(t==="getAnalytics"){r([]);return}if(t==="getNutritionLogs"){r([]);return}if(t==="getFoodList"){r([]);return}try{const p=await(await fetch(it,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:t==="processRequest"?s[0].action:t,data:s[0]?.data||null})})).json();r(p)}catch(n){console.error("API Error:",n),i(n)}return}window.google.script.run.withSuccessHandler(n=>{try{r(JSON.parse(n))}catch{r(n)}}).withFailureHandler(n=>i(n))[t](...s)})}async getFoodList(){return this.call("processRequest",{action:"getFoodList"})}async getNutritionLogs(t){return this.call("processRequest",{action:"getNutrition",data:{date:t}})}async logNutrition(t){return this.call("processRequest",{action:"logNutrition",data:t})}async deleteNutritionLog(t){return this.call("processRequest",{action:"deleteNutrition",data:{rowIndex:t}})}async updateNutritionLog(t,s,r){return this.call("processRequest",{action:"updateNutrition",data:{rowIndex:t,mealName:s,newAmount:r}})}async getComboList(){return this.call("processRequest",{action:"getComboList"})}async logCombo(t,s){return this.call("processRequest",{action:"logCombo",data:{date:t,comboName:s}})}async getWorkouts(t){return this.call("processRequest",{action:"getWorkouts",data:{date:t}})}async logWorkout(t){return this.call("processRequest",{action:"logWorkout",data:t})}async deleteWorkout(t){return this.call("processRequest",{action:"deleteWorkout",data:{rowIndex:t}})}async getRoutines(){return this.call("processRequest",{action:"getRoutines"})}async getWorkoutHistory(t){return this.call("processRequest",{action:"getWorkoutHistory",data:{currentDate:t}})}async getWeeklyAerobicTotal(t){return this.call("processRequest",{action:"getWeeklyAerobic",data:{date:t}})}async getBodyData(t){return this.call("processRequest",{action:"getBodyData",data:{date:t}})}async getLatestBodyMetrics(){return this.call("processRequest",{action:"getLatestBodyMetrics"})}async logBodyData(t){return this.call("processRequest",{action:"logBodyData",data:t})}async getAnalyticsData(){return this.call("processRequest",{action:"getAnalytics"})}}const D=new ot,ct=()=>{const a=new Date,t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0");return`${t}-${s}-${r}`},dt=()=>{if(typeof window<"u"){const a=localStorage.getItem("cycleWeek");if(a)return Number(a)}return 1},K=Fe((a,t)=>({currentView:"NUTRITION",currentDate:ct(),caloriesTarget:2500,proteinTarget:180,carbsTarget:250,fatTarget:70,waterTarget:3e3,caloriesConsumed:0,proteinConsumed:0,carbsConsumed:0,fatConsumed:0,dailyLogs:[],workoutLogs:[],routines:{},cycleWeek:dt(),selectedRoutine:null,workoutHistory:{},aerobicWeeklyGoal:150,aerobicWeeklyCurrent:0,bodyData:null,latestMetrics:{weight:0,waist:0,hip:0,gripL:0,gripR:0},analyticsData:[],workoutDone:!1,isLoading:!1,setView:s=>a({currentView:s}),setCycleWeek:s=>{localStorage.setItem("cycleWeek",String(s)),a({cycleWeek:s})},setSelectedRoutine:s=>a({selectedRoutine:s}),setDate:s=>{a({currentDate:s}),t().fetchDailyData()},fetchDailyData:async()=>{const{currentDate:s}=t();a({isLoading:!0});try{const[r,i,n,p,d,u]=await Promise.all([D.getNutritionLogs(s),D.getWorkouts(s),D.getWorkoutHistory(s),D.getWeeklyAerobicTotal(s),D.getBodyData(s),D.getLatestBodyMetrics()]);let j=0,y=0,h=0,b=0;Array.isArray(r)&&r.forEach(w=>{j+=w.calories||0,y+=w.protein||0,h+=w.carbs||0,b+=w.fat||0}),a({caloriesConsumed:j,proteinConsumed:y,carbsConsumed:h,fatConsumed:b,dailyLogs:Array.isArray(r)?r:[],workoutLogs:Array.isArray(i)?i:[],workoutHistory:n||{},aerobicWeeklyCurrent:p?.totalMinutes||0,bodyData:d,latestMetrics:u||{weight:0,waist:0,hip:0,gripL:0,gripR:0},isLoading:!1})}catch(r){console.error(r),a({isLoading:!1,dailyLogs:[],workoutLogs:[],bodyData:null})}},fetchAnalytics:async()=>{a({isLoading:!0});try{const s=await D.getAnalyticsData();a({analyticsData:s,isLoading:!1})}catch(s){console.error(s),a({isLoading:!1})}},fetchRoutines:async()=>{try{const s=await D.getRoutines();a({routines:s})}catch(s){console.error(s)}},deleteLog:async s=>{a({isLoading:!0});try{await D.deleteNutritionLog(s),await t().fetchDailyData()}catch{alert("Delete failed"),a({isLoading:!1})}},deleteWorkoutLog:async s=>{a({isLoading:!0});try{await D.deleteWorkout(s),await t().fetchDailyData()}catch{alert("Delete failed"),a({isLoading:!1})}},toggleWorkout:()=>a(s=>({workoutDone:!s.workoutDone}))})),ke={è›‹ç™½è³ª:{icon:Me,color:"text-rose-500",bg:"bg-rose-50"},ç¢³æ°´:{icon:We,color:"text-blue-500",bg:"bg-blue-50"},è”¬èœ:{icon:Oe,color:"text-emerald-500",bg:"bg-emerald-50"},æ°´æžœ:{icon:Ae,color:"text-purple-500",bg:"bg-purple-50"},è„‚è‚ª:{icon:Re,color:"text-yellow-500",bg:"bg-yellow-50"},ä¹³è£½å“:{icon:Te,color:"text-cyan-500",bg:"bg-cyan-50"},é£²å“:{icon:Le,color:"text-slate-500",bg:"bg-slate-50"},æ°´:{icon:ae,color:"text-sky-500",bg:"bg-sky-50"},å…¶ä»–:{icon:De,color:"text-gray-400",bg:"bg-gray-50"}},xt=({isOpen:a,onClose:t})=>{const{fetchDailyData:s,currentDate:r}=K(),[i,n]=o.useState([]),[p,d]=o.useState([]),[u,j]=o.useState(!1),[y,h]=o.useState("FOOD"),[b,w]=o.useState("CATEGORY_LIST"),[m,k]=o.useState(null),[x,v]=o.useState(null),[L,R]=o.useState(""),[S,C]=o.useState(1),[W,N]=o.useState(!1);o.useEffect(()=>{a&&(j(!0),Promise.all([D.getFoodList(),D.getComboList()]).then(([l,f])=>{Array.isArray(l)&&n(l),Array.isArray(f)&&d(f)}).catch(()=>{}).finally(()=>j(!1)),M())},[a]);const M=()=>{h("FOOD"),w("CATEGORY_LIST"),k(null),v(null),R(""),C(1)},q=o.useMemo(()=>{let l=i;return l=l.filter(f=>f.category!=="æ°´"),m&&(l=l.filter(f=>f.category===m)),L&&(l=l.filter(f=>f.name.toLowerCase().includes(L.toLowerCase()))),l},[i,m,L]),P=l=>{k(l),w("FOOD_LIST"),R("")},I=l=>{v(l),w("AMOUNT_INPUT"),l.unit.toLowerCase()==="g"?C(100):C(1)},Y=()=>{b==="AMOUNT_INPUT"?(w("FOOD_LIST"),v(null)):b==="FOOD_LIST"&&(w("CATEGORY_LIST"),k(null),R(""))},A=l=>x?x.unit.toLowerCase()==="g"?l/100:l:0,B=async()=>{if(!x)return;const l=Number(S)||0;if(l<=0)return;N(!0);const f=A(l);try{await D.logNutrition({date:r,mealName:x.name,calories:Math.round(x.calories*f),protein:Math.round(x.protein*f),carbs:Math.round(x.carbs*f),fat:Math.round(x.fat*f),amount:l,unit:x.unit,category:x.category}),await s(),t()}catch{alert("Failed to save.")}finally{N(!1)}},O=async l=>{if(confirm(`Add combo "${l}"?`)){N(!0);try{await D.logCombo(r,l),await s(),t()}catch{alert("Failed to add combo.")}finally{N(!1)}}},$=l=>{const f=l.target.value;(f===""||/^\d*\.?\d*$/.test(f))&&C(f)},_=l=>{const f=Number(S)||0;let g=l;x?.unit.toLowerCase()==="g"&&(g=l*10),C(Math.max(0,f+g))};if(!a)return null;let F="Add Meal";y==="COMBO"?F="My Combos":b==="FOOD_LIST"&&m?F=ve[m]?.label||"Food List":b==="AMOUNT_INPUT"&&(F="Edit Amount");const G=l=>ke[l]||ke.å…¶ä»–;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:t}),e.jsxs("div",{className:"relative bg-gray-50 w-full max-w-md rounded-t-[2.5rem] h-[85vh] flex flex-col shadow-2xl animate-slide-up overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-5 bg-gray-50 z-10 min-h-[70px]",children:[b!=="CATEGORY_LIST"&&y==="FOOD"?e.jsx("button",{onClick:Y,className:"p-3 text-gray-500 hover:text-black bg-white rounded-full shadow-sm border border-gray-100",children:e.jsx(Ce,{className:"w-5 h-5"})}):e.jsx("button",{onClick:t,className:"p-3 text-gray-400 hover:text-gray-600 bg-white rounded-full shadow-sm border border-gray-100",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-bold text-lg text-gray-900 tracking-tight",children:F}),e.jsx("div",{className:"w-11"})]}),(b==="CATEGORY_LIST"||y==="COMBO")&&e.jsx("div",{className:"px-6 pb-2",children:e.jsxs("div",{className:"bg-gray-200/60 p-1.5 rounded-2xl flex",children:[e.jsxs("button",{onClick:()=>{h("FOOD"),w("CATEGORY_LIST")},className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${y==="FOOD"?"bg-white shadow-sm text-black":"text-gray-500"}`,children:[e.jsx(ge,{className:"w-4 h-4"}),"Foods"]}),e.jsxs("button",{onClick:()=>h("COMBO"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${y==="COMBO"?"bg-white shadow-sm text-black":"text-gray-500"}`,children:[e.jsx(Pe,{className:"w-4 h-4"}),"Combos"]})]})}),e.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[u||W?e.jsxs("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-gray-50/80 backdrop-blur-sm text-gray-400",children:[e.jsx(J,{className:"w-8 h-8 animate-spin mb-2 text-blue-500"}),e.jsx("p",{className:"font-medium tracking-wide",children:W?"Adding...":"Syncing..."})]}):null,y==="COMBO"&&e.jsx("div",{className:"p-6 overflow-y-auto h-full animate-fade-in space-y-4 pb-24",children:p.length===0?e.jsx("div",{className:"text-center text-gray-400 mt-10",children:"No combos found"}):p.map((l,f)=>e.jsxs("div",{onClick:()=>O(l.name),className:"bg-white p-5 rounded-3xl shadow-sm border border-gray-100 active:scale-[0.98] transition-all cursor-pointer hover:shadow-md group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900",children:l.name}),e.jsxs("div",{className:"bg-orange-50 text-orange-600 px-3 py-1 rounded-full text-sm font-bold",children:[l.totalCalories," kcal"]})]}),e.jsx("div",{className:"space-y-1",children:l.items.map((g,T)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 border-b border-gray-50 pb-1 last:border-0",children:[e.jsx("span",{children:g.name}),e.jsxs("span",{className:"text-gray-300 font-mono",children:[g.amount,g.unit]})]},T))})]},f))}),y==="FOOD"&&b==="CATEGORY_LIST"&&e.jsx("div",{className:"p-6 overflow-y-auto h-full animate-fade-in",children:e.jsx("div",{className:"grid grid-cols-2 gap-4 pb-20",children:Object.entries(ve).filter(([l])=>l!=="æ°´").map(([l,{label:f}])=>{const g=G(l),T=g.icon;return e.jsxs("button",{onClick:()=>P(l),className:`
                        ${g.bg} p-6 rounded-[1.8rem] shadow-sm border-0 
                        flex flex-col items-center justify-center gap-4 
                        active:scale-95 transition-all hover:brightness-95 h-36
                      `,children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-white flex items-center justify-center shadow-sm ${g.color}`,children:e.jsx(T,{className:"w-6 h-6",strokeWidth:2.5})}),e.jsx("span",{className:`font-bold text-base ${g.color.replace("text-","text-opacity-80 ")}`,children:f})]},l)})})}),y==="FOOD"&&b==="FOOD_LIST"&&e.jsxs("div",{className:"flex flex-col h-full animate-fade-in bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-10px_rgba(0,0,0,0.05)] mt-2",children:[e.jsx("div",{className:"p-6 pb-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search food...",className:"w-full pl-12 pr-4 py-3.5 rounded-2xl border-none bg-gray-100 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all text-lg font-medium placeholder-gray-400",value:L,onChange:l=>R(l.target.value)})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 pb-20",children:q.map((l,f)=>e.jsxs("div",{onClick:()=>I(l),className:"p-4 mb-2 bg-white rounded-2xl border border-gray-50 flex justify-between items-center active:bg-gray-50 transition-colors cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-orange-500 bg-orange-50 px-2 py-0.5 rounded-md",children:[l.calories," kcal"]}),e.jsx("span",{className:"text-gray-300",children:"/"}),e.jsx("span",{className:"text-gray-400 text-xs",children:l.unit==="g"?"100g":l.unit})]})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 text-gray-400 flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5"})})]},f))})]}),y==="FOOD"&&b==="AMOUNT_INPUT"&&x&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 flex flex-col items-center animate-fade-in bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-10px_rgba(0,0,0,0.05)] mt-2",children:[(()=>{const l=G(x.category),f=l.icon;return e.jsx("div",{className:`w-24 h-24 ${l.bg} rounded-full flex items-center justify-center mb-5 shadow-inner`,children:e.jsx(f,{className:`w-10 h-10 ${l.color}`,strokeWidth:2})})})(),e.jsx("h3",{className:"text-3xl font-black mb-1 text-center text-gray-900 tracking-tight",children:x.name}),e.jsxs("p",{className:"text-gray-400 font-medium mb-8",children:[x.calories," kcal / ",x.unit==="g"?"100g":x.unit]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-10 p-2 bg-gray-50 rounded-[2rem] w-full max-w-xs border border-gray-100",children:[e.jsx("button",{onClick:()=>_(-1),className:"w-14 h-14 rounded-full bg-white border border-gray-200 flex items-center justify-center text-gray-400 hover:text-black active:scale-90 shadow-sm transition-all",children:e.jsx("span",{className:"text-2xl font-light",children:"-"})}),e.jsxs("div",{className:"flex flex-col items-center w-24",children:[e.jsx("input",{type:"text",inputMode:"decimal",value:S,onChange:$,className:"w-full text-center text-5xl font-black text-gray-900 bg-transparent border-none focus:ring-0 p-0 outline-none placeholder-gray-200"}),e.jsx("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mt-1",children:x.unit})]}),e.jsx("button",{onClick:()=>_(1),className:"w-14 h-14 rounded-full bg-black text-white flex items-center justify-center active:scale-90 shadow-lg transition-all",children:e.jsx(H,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"w-full grid grid-cols-3 gap-3 mb-auto",children:[e.jsx(xe,{label:"CARBS",value:x.carbs*A(Number(S)||0),color:"bg-blue-50 text-blue-600 border-blue-100"}),e.jsx(xe,{label:"PROTEIN",value:x.protein*A(Number(S)||0),color:"bg-rose-50 text-rose-600 border-rose-100"}),e.jsx(xe,{label:"FAT",value:x.fat*A(Number(S)||0),color:"bg-yellow-50 text-yellow-600 border-yellow-100"})]}),e.jsxs("button",{onClick:B,disabled:W||(Number(S)||0)<=0,className:"w-full py-4 bg-black text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 active:scale-95 transition-transform shadow-xl mt-8 mb-4 disabled:opacity-50 disabled:scale-100",children:[e.jsx(X,{className:"w-6 h-6"}),e.jsxs("span",{children:["Add ",Math.round(x.calories*A(Number(S)||0))," kcal"]})]})]})]})]})]})},xe=({label:a,value:t,color:s})=>e.jsxs("div",{className:`p-3 rounded-2xl text-center border ${s} shadow-sm flex flex-col justify-center aspect-[4/3]`,children:[e.jsx("div",{className:"text-[10px] font-black opacity-60 mb-1 tracking-wider",children:a}),e.jsxs("div",{className:"font-black text-xl leading-none",children:[Math.round(t),e.jsx("span",{className:"text-xs ml-0.5 font-bold opacity-80",children:"g"})]})]}),ht=({current:a,target:t})=>{const s=[{name:"Consumed",value:a},{name:"Remaining",value:Math.max(0,t-a)}],r=t-a;return e.jsxs("div",{className:"relative flex flex-col items-center justify-center -mt-4",children:[e.jsxs(Be,{width:300,height:160,children:[e.jsxs(_e,{data:s,cx:150,cy:140,startAngle:180,endAngle:0,innerRadius:85,outerRadius:100,paddingAngle:0,dataKey:"value",stroke:"none",children:[e.jsx(fe,{fill:"url(#colorGradient)"},"consumed"),e.jsx(fe,{fill:"#f3f4f6"},"remaining")]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#f97316"})," ",e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})," "]})})]}),e.jsxs("div",{className:"absolute bottom-0 text-center pb-2",children:[e.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Remaining"}),e.jsx("h2",{className:"text-4xl font-black text-gray-900 tracking-tight",children:r}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"kcal"})]})]})},ue=({date:a,onChange:t})=>{const s=new Date(a),r=[];for(let d=-3;d<=3;d++){const u=new Date(s);u.setDate(u.getDate()+d),r.push(u)}const i=d=>{const u=new Date;return d.toDateString()===u.toDateString()},n=d=>{const u=d.getTimezoneOffset()*6e4;return new Date(d.getTime()-u).toISOString().split("T")[0]},p=d=>{const u=new Date(s);u.setDate(u.getDate()+d),t(n(u))};return e.jsxs("div",{className:"flex flex-col gap-2 mb-8 w-full",children:[e.jsxs("div",{className:"flex justify-between items-center px-2 mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),!i(s)&&e.jsx("button",{onClick:()=>t(n(new Date)),className:"text-xs font-bold text-orange-500 bg-orange-50 px-4 py-2 rounded-full hover:bg-orange-100 transition",children:"Back to Today"})]}),e.jsxs("div",{className:"bg-white p-2 rounded-[2rem] shadow-sm border border-gray-100 flex items-center justify-between relative z-10 w-full",children:[e.jsx("button",{onClick:()=>p(-7),className:"p-3 text-gray-300 hover:text-gray-600 rounded-full hover:bg-gray-50 transition",children:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1 flex justify-around items-center px-2 gap-2",children:r.map((d,u)=>{const j=n(d),y=j===a,h=i(d),b=u===0||u===6?"hidden lg:flex":"flex";return e.jsxs("button",{onClick:()=>t(j),className:`
                  ${b} flex-col items-center justify-center 
                  w-12 h-16 sm:w-16 sm:h-20 rounded-2xl transition-all duration-300 relative
                  ${y?"bg-black text-white shadow-xl scale-110 z-10":"text-gray-400 hover:bg-gray-50 hover:text-gray-600"}
                `,children:[e.jsx("span",{className:`text-[10px] sm:text-xs font-bold uppercase mb-1 ${y?"text-gray-400":""}`,children:d.toLocaleDateString("en-US",{weekday:"short"}).charAt(0)}),e.jsx("span",{className:`text-xl sm:text-2xl font-black leading-none ${y?"text-white":"text-gray-800"}`,children:d.getDate()}),h&&!y&&e.jsx("span",{className:"absolute bottom-2 w-1.5 h-1.5 bg-orange-500 rounded-full"})]},j)})}),e.jsx("button",{onClick:()=>p(7),className:"p-3 text-gray-300 hover:text-gray-600 rounded-full hover:bg-gray-50 transition",children:e.jsx(Ge,{className:"w-6 h-6"})})]})]})},Se={è›‹ç™½è³ª:{icon:Me,color:"text-rose-500",bg:"bg-rose-50"},ç¢³æ°´:{icon:We,color:"text-blue-500",bg:"bg-blue-50"},è”¬èœ:{icon:Oe,color:"text-emerald-500",bg:"bg-emerald-50"},æ°´æžœ:{icon:Ae,color:"text-purple-500",bg:"bg-purple-50"},è„‚è‚ª:{icon:Re,color:"text-yellow-500",bg:"bg-yellow-50"},ä¹³è£½å“:{icon:Te,color:"text-cyan-500",bg:"bg-cyan-50"},é£²å“:{icon:Le,color:"text-slate-500",bg:"bg-slate-50"},æ°´:{icon:ae,color:"text-sky-500",bg:"bg-sky-50"},å…¶ä»–:{icon:De,color:"text-gray-400",bg:"bg-gray-50"}},mt=()=>{const{currentDate:a,setDate:t,caloriesTarget:s,caloriesConsumed:r,proteinTarget:i,proteinConsumed:n,carbsTarget:p,carbsConsumed:d,fatTarget:u,fatConsumed:j,waterTarget:y,dailyLogs:h,deleteLog:b,isLoading:w,fetchDailyData:m}=K(),[k,x]=o.useState(!1),[v,L]=o.useState(!1);o.useEffect(()=>{m()},[m]);const R=h.filter(N=>N.mealName==="Water").reduce((N,M)=>N+M.amount,0),S=Math.min(R/y*100,100),C=h.filter(N=>N.mealName!=="Water"),W=async()=>{L(!0);try{await D.logNutrition({date:a,mealName:"Water",calories:0,protein:0,carbs:0,fat:0,amount:100,unit:"ml",category:"æ°´"}),await m()}catch{alert("Failed to add water")}finally{L(!1)}};return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32",children:[e.jsx(ue,{date:a,onChange:t}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 flex flex-col items-center relative overflow-hidden",children:[w&&e.jsx("div",{className:"absolute inset-0 bg-white/80 z-10 flex items-center justify-center",children:e.jsx(J,{className:"w-8 h-8 animate-spin text-orange-500"})}),e.jsx(ht,{current:r,target:s}),e.jsxs("div",{className:"w-full flex justify-between px-6 mt-[-20px] mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:"Eaten"}),e.jsx("p",{className:"text-xl font-black text-gray-900",children:r})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider",children:"Goal"}),e.jsx("p",{className:"text-xl font-black text-gray-900",children:s})]})]}),e.jsxs("div",{className:"w-full grid grid-cols-3 gap-2 sm:gap-4 border-t border-gray-100 pt-6",children:[e.jsx(he,{label:"Protein",current:n,target:i,color:"bg-rose-500",bg:"bg-rose-100"}),e.jsx(he,{label:"Carbs",current:d,target:p,color:"bg-blue-500",bg:"bg-blue-100"}),e.jsx(he,{label:"Fat",current:j,target:u,color:"bg-yellow-500",bg:"bg-yellow-100"})]})]}),e.jsxs("div",{className:"bg-sky-50 rounded-[2rem] p-6 shadow-sm border border-sky-100 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 bg-white rounded-lg shadow-sm",children:e.jsx(ae,{className:"w-4 h-4 text-sky-500"})}),e.jsx("span",{className:"text-sm font-bold text-sky-900 uppercase tracking-wide",children:"Water Tracker"})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-4xl font-black text-sky-600",children:R}),e.jsxs("span",{className:"text-sm font-bold text-sky-400",children:["/ ",y," ml"]})]})]}),e.jsxs("button",{onClick:W,disabled:v,className:"bg-white text-sky-500 p-3 rounded-2xl shadow-sm active:scale-95 transition-all hover:shadow-md disabled:opacity-70 flex flex-col items-center justify-center gap-1 w-20 h-20",children:[v?e.jsx(J,{className:"w-6 h-6 animate-spin"}):e.jsx(H,{className:"w-6 h-6 stroke-[3px]"}),e.jsx("span",{className:"text-xs font-bold",children:"+100ml"})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-sky-400 mb-1.5",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(S),"%"]})]}),e.jsx("div",{className:"w-full h-3 bg-white rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-sky-300 to-sky-500 rounded-full transition-all duration-700 ease-out",style:{width:`${S}%`}})})]}),e.jsx(ae,{className:"absolute -right-6 -bottom-6 w-40 h-40 text-sky-200/40 -rotate-12 pointer-events-none"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"hidden lg:flex w-full bg-black text-white p-5 rounded-[2rem] shadow-xl items-center justify-center gap-3 active:scale-95 transition-transform hover:bg-gray-800",children:[e.jsx(H,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-lg",children:"Log Food"})]})]}),e.jsxs("div",{className:"lg:col-span-7",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4 px-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Today's Meals"}),e.jsxs("span",{className:"text-sm text-gray-500 font-medium bg-white px-3 py-1 rounded-full shadow-sm border border-gray-100",children:[C.length," entries"]})]}),e.jsx("div",{className:"space-y-3",children:C.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400 bg-white rounded-[2rem] border border-dashed border-gray-200",children:"No food logged yet today."}):C.map(N=>e.jsx(gt,{log:N,onDelete:()=>b(N.rowIndex),onUpdate:()=>m()},N.rowIndex))})]})]}),e.jsx("div",{className:"lg:hidden fixed bottom-24 left-0 right-0 flex justify-center z-50 pointer-events-none",children:e.jsxs("button",{onClick:()=>x(!0),className:"pointer-events-auto bg-black text-white px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 active:scale-95 transition-transform hover:bg-gray-900",children:[e.jsx(H,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-lg",children:"Log Food"})]})}),e.jsx(xt,{isOpen:k,onClose:()=>x(!1)})]})},gt=({log:a,onDelete:t,onUpdate:s})=>{const[r,i]=o.useState(!1),[n,p]=o.useState(a.amount||0),[d,u]=o.useState(!1),j=o.useRef(null);o.useEffect(()=>{r&&j.current&&j.current.focus()},[r]);const y=()=>{confirm(`Delete "${a.mealName}"?`)&&t()},h=async()=>{if(Number(n)===0){y();return}if(!(n<0)){u(!0);try{await D.updateNutritionLog(a.rowIndex,a.mealName,Number(n)),i(!1),s()}catch{alert("Update failed")}finally{u(!1)}}},b=Se[a.category]||Se.å…¶ä»–,w=b.icon;return e.jsxs("div",{className:"bg-white p-4 sm:p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center group hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${b.bg} flex items-center justify-center shadow-inner flex-shrink-0`,children:e.jsx(w,{className:`w-5 h-5 ${b.color}`,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg leading-tight",children:a.mealName}),e.jsxs("span",{className:"text-xs text-gray-300 font-mono flex items-center gap-1 mt-0.5",children:[e.jsx(me,{className:"w-3 h-3"}),a.time]})]})]}),e.jsxs("div",{className:"pl-[3.25rem] flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-gray-500 font-medium",children:[e.jsx("div",{className:"flex items-center gap-2 bg-gray-50 px-2 py-0.5 rounded-lg border border-gray-100",children:r?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{ref:j,type:"number",className:"w-16 bg-white border border-blue-200 rounded px-1 py-0 text-right font-bold text-black focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:m=>p(Number(m.target.value)),onKeyDown:m=>m.key==="Enter"&&h()}),e.jsx("span",{className:"text-xs",children:a.unit}),e.jsx("button",{onClick:h,disabled:d,className:"text-green-600 hover:bg-green-100 p-1 rounded",children:d?e.jsx(J,{className:"w-4 h-4 animate-spin"}):e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>i(!1),className:"text-red-400 hover:bg-red-50 p-1 rounded",children:e.jsx(re,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-1 hover:text-blue-600 hover:bg-blue-50 px-1 rounded transition-colors group/edit",children:[e.jsx("span",{className:"font-bold text-gray-900 group-hover/edit:text-blue-600",children:a.amount>0?a.amount:"-"}),e.jsx("span",{className:"text-xs",children:a.unit})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx("span",{className:"text-gray-200 hidden sm:inline",children:"|"}),e.jsxs("span",{className:"text-orange-500 font-bold",children:[a.calories," kcal"]}),e.jsx("span",{className:"text-gray-200 hidden sm:inline",children:"|"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-rose-500",children:[a.protein,"p"]}),e.jsxs("span",{className:"text-blue-500",children:[a.carbs,"c"]}),e.jsxs("span",{className:"text-yellow-600",children:[a.fat,"f"]})]})]})]})]}),!r&&e.jsx("button",{onClick:y,className:"p-3 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]})},he=({label:a,current:t,target:s,color:r,bg:i})=>{const n=Math.min(t/s*100,100);return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs font-bold text-gray-400 mb-1",children:a}),e.jsxs("div",{className:"text-lg font-black text-gray-900 mb-2",children:[Math.round(t),e.jsxs("span",{className:"text-[10px] text-gray-400 font-normal",children:["/",s,"g"]})]}),e.jsx("div",{className:`w-full h-2 ${i} rounded-full overflow-hidden`,children:e.jsx("div",{className:`h-full ${r} rounded-full transition-all duration-500`,style:{width:`${n}%`}})})]})},ut=()=>{const{currentDate:a,setDate:t,workoutLogs:s,deleteWorkoutLog:r,fetchDailyData:i,routines:n,fetchRoutines:p,cycleWeek:d,setCycleWeek:u,selectedRoutine:j,setSelectedRoutine:y,workoutHistory:h,aerobicWeeklyGoal:b,aerobicWeeklyCurrent:w}=K(),[m,k]=o.useState("Strength"),[x,v]=o.useState(""),[L,R]=o.useState(""),[S,C]=o.useState(""),[W,N]=o.useState(""),[M,q]=o.useState(""),[P,I]=o.useState(""),[Y,A]=o.useState(""),[B,O]=o.useState(""),[$,_]=o.useState(!1);o.useEffect(()=>{p()},[p]),o.useEffect(()=>{m==="Aerobic"?(v("Run"),I("30"),A("3.5"),O("130")):(v(""),I(""),A(""),O(""))},[m]);const F=c=>d===3?c.w3:c.w12,G=c=>{const z=F(c);k("Strength"),v(c.exercise),N(String(z.sets));const V=z.reps.split(/[-~]/)[0]||"";C(V),document.getElementById("workout-form")?.scrollIntoView({behavior:"smooth"})},l=async()=>{if(x){_(!0);try{await D.logWorkout({date:a,type:m,exercise:x,weight:Number(L)||0,reps:Number(S)||0,sets:Number(W)||0,rpe:Number(M)||0,time:Number(P)||0,intensity:Y,heartRate:Number(B)||0,tags:[]}),await i(),m==="Strength"?(v(""),R(""),C(""),N(""),q("")):(v("Run"),I("30"),A("3.5"),O("130"))}catch{alert("Failed to log workout")}finally{_(!1)}}},f=c=>{confirm("Delete this workout record?")&&r(c)},g=d===3?"Week 3 (Intensity)":`Week ${d} (Volume)`,T=d===3?"bg-red-500":"bg-black",E=Math.max(0,b-w),Q=Math.min(w/b*100,100);return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32",children:[e.jsx(ue,{date:a,onChange:t}),m==="Strength"&&e.jsx("div",{className:"flex justify-center mb-6 -mt-2",children:e.jsxs("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold text-white shadow-sm flex items-center gap-2 ${d===3?"bg-red-500":"bg-black"}`,children:[e.jsx("span",{className:"opacity-70 uppercase tracking-wider",children:"Current Cycle"}),e.jsxs("span",{children:["Week ",d]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[e.jsxs("div",{className:"flex bg-gray-200/50 p-1 rounded-2xl",children:[e.jsxs("button",{onClick:()=>k("Strength"),className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${m==="Strength"?"bg-white shadow-sm text-black":"text-gray-400"}`,children:[e.jsx(se,{className:"w-5 h-5"})," Strength"]}),e.jsxs("button",{onClick:()=>k("Aerobic"),className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${m==="Aerobic"?"bg-white shadow-sm text-black":"text-gray-400"}`,children:[e.jsx(ye,{className:"w-5 h-5"})," Aerobic"]})]}),m==="Strength"&&e.jsxs("div",{className:`${T} text-white rounded-[2rem] p-6 shadow-xl relative overflow-hidden transition-colors duration-500`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-xs font-bold uppercase tracking-wider mb-1",children:"Select Cycle"}),e.jsx("h2",{className:"text-2xl font-black italic",children:g})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-1 flex",children:[1,2,3].map(c=>e.jsx("button",{onClick:()=>u(c),className:`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${d===c?"bg-white text-black shadow-sm":"text-white/60 hover:text-white"}`,children:c},c))})]}),e.jsxs("div",{className:"relative z-10 mt-4",children:[e.jsx("label",{className:"text-white/60 text-xs font-bold uppercase mb-2 block",children:"Select Routine"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:[Object.keys(n).length===0&&e.jsx("div",{className:"text-white/40 text-xs",children:"Please setup DB_Routines"}),Object.keys(n).map(c=>e.jsx("button",{onClick:()=>y(j===c?null:c),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold border transition-all ${j===c?"bg-white text-black border-white":"border-white/30 text-white hover:bg-white/10"}`,children:c},c))]})]}),e.jsx(se,{className:"absolute -right-6 -bottom-6 w-40 h-40 text-white/10 -rotate-12 pointer-events-none"})]}),m==="Aerobic"&&e.jsxs("div",{className:"bg-cyan-500 text-white rounded-[2rem] p-6 shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-cyan-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Weekly Target"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h2",{className:"text-4xl font-black",children:E>0?E:0}),e.jsx("span",{className:"text-cyan-200 font-bold",children:"mins left"})]})]}),e.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:e.jsx(ze,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-200 mb-1.5",children:[e.jsxs("span",{children:[w," min done"]}),e.jsxs("span",{children:[Math.round(Q),"%"]})]}),e.jsx("div",{className:"w-full h-3 bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-700 ease-out",style:{width:`${Q}%`}})})]}),e.jsx(ye,{className:"absolute -right-6 -bottom-6 w-40 h-40 text-white/10 -rotate-12 pointer-events-none"})]}),m==="Strength"&&j&&n[j]&&e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 animate-fade-in",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-green-500"}),"Plan: ",j]}),e.jsx("div",{className:"space-y-3",children:n[j].map((c,z)=>{const V=s.some(le=>le.exercise===c.exercise),be=F(c),pe=h[c.exercise];return e.jsxs("button",{onClick:()=>G(c),className:`w-full text-left p-4 rounded-2xl border transition-all group relative ${V?"bg-gray-50 border-gray-100 opacity-60":"bg-white border-gray-100 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:`font-bold text-lg ${V?"text-gray-400 line-through":"text-gray-900"}`,children:c.exercise}),c.note&&e.jsx("div",{className:"group/tooltip relative ml-2",onClick:le=>{le.stopPropagation(),alert(c.note)},children:e.jsx(Ue,{className:"w-5 h-5 text-blue-400/70 hover:text-blue-500 transition-colors"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"text-xs font-bold bg-gray-100 text-gray-600 px-2 py-1 rounded-md",children:[be.sets," Sets"]}),e.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-md ${d===3?"bg-red-50 text-red-600":"bg-blue-50 text-blue-600"}`,children:[be.reps," Reps"]}),pe&&e.jsxs("span",{className:"text-[10px] text-gray-400 font-medium ml-auto",children:["Last: ",pe.weight,"kg"]})]})]}),!V&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(qe,{className:"w-5 h-5 text-blue-500"})})]},z)})})]}),e.jsx("div",{id:"workout-form",className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase ml-1 mb-1 block",children:"Exercise Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:m==="Strength"?"e.g. Bench Press":"e.g. Running",className:"w-full bg-gray-50 rounded-2xl pl-4 pr-10 py-3 font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-black/5",value:x,onChange:c=>v(c.target.value)}),x&&e.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-3.5 text-gray-400 hover:text-gray-600",children:e.jsx(re,{className:"w-4 h-4"})})]}),m==="Strength"&&x&&h[x]&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1 ml-1",children:["Last: ",e.jsxs("strong",{children:[h[x].weight,"kg"]})," Ã— ",h[x].reps," reps"]})]}),m==="Strength"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(U,{label:"Sets",value:W,onChange:N,type:"number",placeholder:"3"}),e.jsx(U,{label:"Reps",value:S,onChange:C,type:"number",placeholder:"10"}),e.jsx(U,{label:"Weight (kg)",value:L,onChange:R,type:"number",placeholder:"60"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.jsx(U,{label:"RPE (1-10)",value:M,onChange:q,type:"number",placeholder:"8"})})]}):e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(U,{label:"Time (min)",value:P,onChange:I,type:"number",placeholder:"30"}),e.jsx(U,{label:"Intensity (1-10)",value:Y,onChange:A,type:"number",placeholder:"3.5",step:"0.1",min:"1",max:"10"}),e.jsx(U,{label:"Avg HR",value:B,onChange:O,type:"number",placeholder:"130"})]}),e.jsx("button",{onClick:l,disabled:$||!x,className:"w-full bg-black text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform disabled:opacity-50 mt-2",children:$?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-5 h-5"})," Log Workout"]})})]})})]}),e.jsxs("div",{className:"lg:col-span-7",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 px-1",children:"Today's Session"}),e.jsx("div",{className:"space-y-3",children:s.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-400 bg-white rounded-[2rem] border border-dashed border-gray-200",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),e.jsx("p",{children:"No workouts logged today."})]}):s.map(c=>{const z=h[c.exercise];return e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center group hover:shadow-md transition-all",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${c.type==="Strength"?"bg-blue-50 text-blue-600":"bg-cyan-50 text-cyan-600"}`,children:c.type})}),e.jsx("h4",{className:"font-bold text-lg text-gray-900",children:c.exercise}),e.jsx("div",{className:"text-sm text-gray-500 font-medium mt-1 flex items-center gap-2",children:c.type==="Strength"?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:[c.sets," sets Ã— ",c.reps," reps ",e.jsx("span",{className:"text-gray-300",children:"|"})," ",e.jsxs("b",{children:[c.weight,"kg"]})," ",e.jsx("span",{className:"text-gray-300",children:"|"})," RPE ",c.rpe]}),z&&e.jsxs("span",{className:"text-xs text-gray-400 ml-1 border-l border-gray-200 pl-2",children:["(Last: ",z.weight,"kg)"]})]}):e.jsxs("span",{children:[c.time," mins ",e.jsx("span",{className:"text-gray-300",children:"|"})," Int: ",c.intensity," ",e.jsx("span",{className:"text-gray-300",children:"|"})," ",c.heartRate," bpm"]})})]}),e.jsx("button",{onClick:()=>f(c.rowIndex),className:"p-3 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:e.jsx(Ie,{className:"w-5 h-5"})})]},c.rowIndex)})})]})]})]})},U=({label:a,value:t,onChange:s,type:r,placeholder:i,step:n,min:p,max:d})=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase ml-1 mb-1 block",children:a}),e.jsx("input",{type:r,placeholder:i,step:n,min:p,max:d,className:"w-full bg-gray-50 rounded-2xl px-4 py-3 font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-black/5 placeholder-gray-300",value:t,onChange:u=>s(u.target.value)})]}),bt=()=>{const{currentDate:a,setDate:t,bodyData:s,latestMetrics:r,fetchDailyData:i}=K(),[n,p]=o.useState(""),[d,u]=o.useState(""),[j,y]=o.useState(""),[h,b]=o.useState(""),[w,m]=o.useState(""),[k,x]=o.useState(""),[v,L]=o.useState(""),[R,S]=o.useState(0),[C,W]=o.useState(!1),[N,M]=o.useState(!1),[q,P]=o.useState(!1),[I,Y]=o.useState(null),[A,B]=o.useState(!1),O=new Date(a).getDay()===6;o.useEffect(()=>{s?(p(s.weight?String(s.weight):""),u(s.waist?String(s.waist):""),y(s.hip?String(s.hip):""),b(s.gripL?String(s.gripL):""),m(s.gripR?String(s.gripR):""),x(s.bedTime||""),L(s.wakeTime||""),S(typeof s.mood=="number"?s.mood:0),W(s.menstrual||!1),M(s.poop||!1)):(p(r.weight?String(r.weight):""),u(r.waist?String(r.waist):""),y(r.hip?String(r.hip):""),b(r.gripL?String(r.gripL):""),m(r.gripR?String(r.gripR):""),x(""),L(""),S(0),W(!1),M(!1))},[s,a,r]);const $=async(g={})=>{B(!0);try{await D.logBodyData({date:a,weight:Number(n)||0,waist:Number(d)||0,hip:Number(j)||0,gripL:Number(h)||0,gripR:Number(w)||0,bedTime:k,wakeTime:v,mood:R||0,menstrual:C,poop:N,...g}),await i()}catch{alert("Failed to save")}finally{B(!1)}},_=()=>{const g=new Date,T=String(g.getHours()).padStart(2,"0"),E=String(g.getMinutes()).padStart(2,"0");return`${T}:${E}`},F=g=>{const T=_();g==="bed"?(x(T),$({bedTime:T})):(L(T),$({wakeTime:T}))},G=g=>{Y(g),P(!0)},l=g=>{I==="bed"?(x(g),$({bedTime:g})):(L(g),$({wakeTime:g})),P(!1)},f=["ðŸ˜­","ðŸ˜Ÿ","ðŸ˜","ðŸ™‚","ðŸ˜€"];return e.jsxs("div",{className:"w-full max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32",children:[e.jsx(ue,{date:a,onChange:t}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 animate-fade-in",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"p-2 bg-purple-50 rounded-xl text-purple-500",children:e.jsx(je,{className:"w-5 h-5"})}),"Body Metrics"]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-2 block",children:"Daily Check"}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-xl shadow-sm text-purple-500",children:e.jsx(je,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold text-gray-700 text-lg",children:"Weight"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("input",{type:"number",step:"0.1",placeholder:"-",className:"w-24 bg-transparent text-right text-3xl font-black text-purple-600 placeholder-purple-300 focus:outline-none",value:n,onChange:g=>p(g.target.value)}),e.jsx("span",{className:"text-sm font-bold text-purple-400",children:"kg"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Weekly Check (Sat)"}),!O&&e.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-400 px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(Ye,{className:"w-3 h-3"})," Not Saturday"]})]}),e.jsxs("div",{className:`grid grid-cols-2 gap-3 transition-opacity ${O?"":"opacity-50 grayscale pointer-events-none"}`,children:[e.jsx(ee,{label:"Waist",unit:"cm",value:d,onChange:u,icon:we,color:"text-blue-500",disabled:!O}),e.jsx(ee,{label:"Hip",unit:"cm",value:j,onChange:y,icon:we,color:"text-cyan-500",disabled:!O}),e.jsx(ee,{label:"Grip (L)",unit:"kg",value:h,onChange:b,icon:Ne,color:"text-orange-500",disabled:!O}),e.jsx(ee,{label:"Grip (R)",unit:"kg",value:w,onChange:m,icon:Ne,color:"text-orange-500",disabled:!O})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase mb-2 block",children:"Sleep Tracker"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>G("bed"),className:`relative overflow-hidden p-6 rounded-[1.5rem] flex flex-col items-center justify-center gap-2 transition-all active:scale-95 border group ${k?"bg-indigo-500 text-white border-indigo-500 shadow-lg shadow-indigo-200":"bg-gray-50 text-gray-400 border-gray-100 hover:bg-gray-100"}`,children:[e.jsx($e,{className:`w-8 h-8 ${k?"text-white":"text-indigo-400"}`,strokeWidth:2}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${k?"text-indigo-100":"text-gray-400"}`,children:"Bedtime"}),k?e.jsx("div",{className:"text-3xl font-black tracking-tight mt-1",children:k}):e.jsx("span",{className:"text-sm font-medium",children:"Tap to Record"}),e.jsx("div",{onClick:g=>{g.stopPropagation(),F("bed")},className:"absolute bottom-3 right-3 bg-white/20 backdrop-blur-sm p-2 rounded-xl shadow-sm z-20 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity hover:bg-white/40",children:e.jsx(me,{className:`w-5 h-5 ${k?"text-white":"text-indigo-400"}`})})]}),e.jsxs("button",{onClick:()=>G("wake"),className:`relative overflow-hidden p-6 rounded-[1.5rem] flex flex-col items-center justify-center gap-2 transition-all active:scale-95 border group ${v?"bg-orange-500 text-white border-orange-500 shadow-lg shadow-orange-200":"bg-gray-50 text-gray-400 border-gray-100 hover:bg-gray-100"}`,children:[e.jsx(He,{className:`w-8 h-8 ${v?"text-white":"text-orange-400"}`,strokeWidth:2}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${v?"text-orange-100":"text-gray-400"}`,children:"Wake Up"}),v?e.jsx("div",{className:"text-3xl font-black tracking-tight mt-1",children:v}):e.jsx("span",{className:"text-sm font-medium",children:"Tap to Record"}),e.jsx("div",{onClick:g=>{g.stopPropagation(),F("wake")},className:"absolute bottom-3 right-3 bg-white/20 backdrop-blur-sm p-2 rounded-xl shadow-sm z-20 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity hover:bg-white/40",children:e.jsx(me,{className:`w-5 h-5 ${v?"text-white":"text-orange-400"}`})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50/50 p-4 rounded-2xl border border-yellow-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-yellow-600 font-bold",children:[e.jsx(Ke,{className:"w-5 h-5"})," Mood"]}),e.jsx("div",{className:"flex justify-between text-2xl",children:f.map((g,T)=>{const E=T+1,Q=R===E;return e.jsx("button",{onClick:()=>S(E),className:`transition-transform duration-200 ${Q?"scale-125 drop-shadow-md grayscale-0":"grayscale opacity-40 hover:opacity-100 hover:grayscale-0"}`,children:g},E)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-pink-50/50 p-4 rounded-2xl border border-pink-100 flex flex-col justify-between h-24",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink-600 font-bold",children:[e.jsx(Ve,{className:"w-5 h-5"})," Period"]}),e.jsx("button",{onClick:()=>W(!C),className:`w-full py-2 rounded-xl font-bold text-sm transition-colors ${C?"bg-pink-500 text-white shadow-md":"bg-white text-gray-400 border border-gray-200"}`,children:C?"Yes":"No"})]}),e.jsxs("div",{className:"bg-stone-100 p-4 rounded-2xl border border-stone-200 flex flex-col justify-between h-24",children:[e.jsxs("div",{className:"flex items-center gap-2 text-stone-600 font-bold",children:[e.jsx("span",{className:"text-xl",children:"ðŸ’©"})," Poop"]}),e.jsx("button",{onClick:()=>M(!N),className:`w-full py-2 rounded-xl font-bold text-sm transition-colors ${N?"bg-stone-600 text-white shadow-md":"bg-white text-gray-400 border border-gray-200"}`,children:N?"Yes":"No"})]})]})]}),e.jsx("button",{onClick:()=>$(),disabled:A,className:"w-full bg-black text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-2 active:scale-95 transition-transform disabled:opacity-50 mt-4",children:A?e.jsx(J,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5"})," Save Daily Log"]})})]}),e.jsx(pt,{isOpen:q,onClose:()=>P(!1),onConfirm:l,initialValue:I==="bed"?k:v,title:I==="bed"?"Bedtime":"Wake Up Time"})]})]})},ee=({label:a,unit:t,value:s,onChange:r,icon:i,color:n,disabled:p})=>e.jsxs("div",{className:`bg-gray-50 p-3 rounded-2xl flex flex-col justify-center gap-1 ${p?"opacity-50 pointer-events-none":""}`,children:[e.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase flex items-center gap-1",children:[e.jsx(i,{className:`w-3 h-3 ${n}`})," ",a]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("input",{type:"number",step:"0.1",placeholder:"-",className:"w-full bg-transparent text-xl font-black text-gray-900 placeholder-gray-300 focus:outline-none",value:s,onChange:d=>r(d.target.value)}),e.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:t})]})]}),pt=({isOpen:a,onClose:t,onConfirm:s,initialValue:r,title:i})=>{const[n,p]=o.useState("00"),[d,u]=o.useState("00");if(o.useEffect(()=>{if(a){let h=r;if(!h){const m=new Date,k=String(m.getHours()).padStart(2,"0"),x=String(m.getMinutes()).padStart(2,"0");h=`${k}:${x}`}const[b,w]=h.split(":");p(b||"00"),u(w||"00")}},[a,r]),!a)return null;const j=Array.from({length:24},(h,b)=>b.toString().padStart(2,"0")),y=Array.from({length:60},(h,b)=>b.toString().padStart(2,"0"));return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:t}),e.jsxs("div",{className:"relative bg-white w-full max-w-md rounded-t-3xl shadow-2xl animate-slide-up overflow-hidden pb-safe h-[400px] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 bg-white z-10",children:[e.jsx("button",{onClick:t,className:"p-2 text-gray-400",children:e.jsx(re,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold text-lg",children:i}),e.jsx("button",{onClick:()=>s(`${n}:${d}`),className:"p-2 text-blue-600 font-bold",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 flex relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-0 right-0 h-14 bg-gray-100/50 -z-10 mx-4 rounded-xl pointer-events-none"}),e.jsxs("div",{className:"flex-1 overflow-y-auto snap-y snap-mandatory no-scrollbar py-32 text-center",children:[j.map(h=>e.jsx("div",{onClick:()=>p(h),className:`snap-center h-14 flex items-center justify-center text-3xl font-bold cursor-pointer transition-all ${n===h?"text-black scale-110":"text-gray-300 scale-90"}`,children:h},h)),e.jsx("div",{className:"h-32"})]}),e.jsx("div",{className:"flex items-center justify-center font-black text-3xl pb-2 text-gray-300",children:":"}),e.jsxs("div",{className:"flex-1 overflow-y-auto snap-y snap-mandatory no-scrollbar py-32 text-center",children:[y.map(h=>e.jsx("div",{onClick:()=>u(h),className:`snap-center h-14 flex items-center justify-center text-3xl font-bold cursor-pointer transition-all ${d===h?"text-black scale-110":"text-gray-300 scale-90"}`,children:h},h)),e.jsx("div",{className:"h-32"})]})]})]})]})},ft=()=>{const{fetchAnalytics:a,analyticsData:t,isLoading:s}=K();o.useEffect(()=>{a()},[a]);const r=i=>{const n=new Date(i);return`${n.getMonth()+1}/${n.getDate()}`};return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-32 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6 px-1",children:"Data Analytics"}),s?e.jsx("div",{className:"flex justify-center py-20 text-gray-400",children:"Loading charts..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-50 text-purple-500 rounded-xl",children:e.jsx(Je,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold text-gray-700",children:"Weight Trend"})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Xe,{data:t,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorWeight",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),e.jsx(ie,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(oe,{dataKey:"date",tickFormatter:r,tick:{fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(ce,{domain:["dataMin - 1","dataMax + 1"],hide:!0}),e.jsx(de,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},labelFormatter:i=>new Date(i).toDateString()}),e.jsx(Qe,{type:"monotone",dataKey:"weight",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorWeight)",strokeWidth:3,connectNulls:!0})]})})})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-orange-50 text-orange-500 rounded-xl",children:e.jsx(ge,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold text-gray-700",children:"Calories & Macros"})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(Ze,{data:t,stackOffset:"sign",children:[e.jsx(ie,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(oe,{dataKey:"date",tickFormatter:r,tick:{fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(de,{cursor:{fill:"#f9fafb"},contentStyle:{borderRadius:"12px",border:"none"}}),e.jsx(Z,{dataKey:"protein",stackId:"a",fill:"#f43f5e",name:"Protein"})," ",e.jsx(Z,{dataKey:"carbs",stackId:"a",fill:"#3b82f6",name:"Carbs"}),"   ",e.jsx(Z,{dataKey:"fat",stackId:"a",fill:"#eab308",name:"Fat"}),"       "]})})})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-500 rounded-xl",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold text-gray-700",children:"Sleep & Mood"})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(ne,{width:"100%",height:"100%",children:e.jsxs(et,{data:t,children:[e.jsx(ie,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(oe,{dataKey:"date",tickFormatter:r,tick:{fontSize:10},axisLine:!1,tickLine:!1}),e.jsx(ce,{yAxisId:"left",domain:[0,12],hide:!0}),e.jsx(ce,{yAxisId:"right",domain:[0,6],orientation:"right",hide:!0}),e.jsx(de,{contentStyle:{borderRadius:"12px",border:"none"}}),e.jsx(tt,{}),e.jsx(Z,{yAxisId:"left",dataKey:"sleep",barSize:10,fill:"#6366f1",radius:[4,4,0,0],name:"Sleep (hr)"}),e.jsx(st,{yAxisId:"right",type:"monotone",dataKey:"mood",stroke:"#eab308",strokeWidth:3,dot:{r:4},name:"Mood (1-5)"})]})})})]})]})]})};function yt(){const{currentView:a,setView:t}=K();return e.jsxs("div",{className:"min-h-screen w-full bg-gray-50 text-gray-900 font-sans pb-24",children:[a==="NUTRITION"&&e.jsx(mt,{}),a==="WORKOUT"&&e.jsx(ut,{}),a==="BODY"&&e.jsx(bt,{}),a==="ANALYTICS"&&e.jsx(ft,{}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 pb-safe pt-2 px-4 shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.05)] z-50",children:e.jsxs("div",{className:"flex justify-between items-center max-w-md mx-auto h-16",children:[e.jsx(te,{view:"NUTRITION",icon:ge,label:"Nutrition",current:a,setView:t}),e.jsx(te,{view:"WORKOUT",icon:se,label:"Workout",current:a,setView:t}),e.jsx(te,{view:"BODY",icon:at,label:"Body",current:a,setView:t}),e.jsx(te,{view:"ANALYTICS",icon:rt,label:"Data",current:a,setView:t})]})})]})}const te=({view:a,icon:t,label:s,current:r,setView:i})=>e.jsxs("button",{onClick:()=>i(a),className:`flex flex-col items-center gap-1 w-16 transition-colors ${r===a?"text-black":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx("div",{className:`p-1.5 rounded-xl transition-all ${r===a?"bg-gray-100 scale-110":"bg-transparent"}`,children:e.jsx(t,{className:"w-5 h-5",strokeWidth:r===a?2.5:2})}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wide",children:s})]});lt.createRoot(document.getElementById("root")).render(e.jsx(nt.StrictMode,{children:e.jsx(yt,{})}));
